<%args>
	$circuit_id
</%args>
<%init>

	my $circuit = Tab::Circuit->retrieve($circuit_id);

	foreach my $chapter ($circuit->chapters) {

		next unless $ARGS{$chapter->id};

		my $cls = $chapter->circuit_membership($circuit);


		$cls->active($ARGS{"act_".$chapter->id});
		$cls->full_member($ARGS{"full_".$chapter->id});
		$cls->membership($ARGS{"mem_".$chapter->id});
		$cls->code($ARGS{"code_".$chapter->id});
		$cls->region($ARGS{"region_".$chapter->id}) if $tourn->setting("regions");

		$chapter->state($ARGS{"state_".$chapter->id});

		$cls->update;
		$chapter->update;

	}

	$m->redirect("chapters_search.mhtml?circuit_id=".$circuit_id);

</%init>

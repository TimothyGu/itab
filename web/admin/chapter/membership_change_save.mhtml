<%args>
	$circuit_mem_id
	$region_id => undef
	$type
</%args>
<%init>

	my $membership = Tab::ChapterCircuit->retrieve($circuit_mem_id);


	$membership->region($region_id);

	$membership->full_member(1) if $type eq "full";
	$membership->full_member("") if $type eq "to";

	if ($type && ($type ne "full" && $type ne "to")) { 

		$membership->full_member(1);
		$membership->membership($type);

	}

	$membership->update;

	my $msg = "Membership details saved";

	$m->redirect("/admin/chapter/chapter_edit.mhtml?chapter_id=".$membership->chapter->id."&msg=$msg");


</%init>

<%args>
	$story_id => undef
</%args>
<%init>

	my $story = Tab::News->retrieve($story_id);

	if ($story->active == 1) { 
		$story->active(0);
	} else { 
		$story->active(1);
	}

	$story->update;

	my $err = "Story \"".$story->title."\" is now ";
	$err .= ($story->active) ? "published" : "unpublished";

	$m->redirect("news_edit.mhtml?err=$err");

</%init>

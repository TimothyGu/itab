<%args>
	$account
</%args>
<%init>

	my @already = $m->comp("/funclib/account_judges.mas", account => $account);

	my %judge_by_tourn = ();

	foreach my $judge (@already) {
		$judge_by_tourn{$judge->tourn} = $judge;
	}

</%init>

	<& /funclib/tablesorter.mas, table => "sortme" &>

	<& /user/menu.mas, account => $account &>

	<div class="huge left">

		<h2>
			Offer Hired Rounds
		</h2>

		<table cellpadding="4" cellspacing="1" id="sortme">

			<thead>
			<tr class="yellowrow">

				<th>
					Tournament
				</th>

				<th>
					Dates
				</th>

				<th>
					Loc
				</th>

				<th class="smaller nosort">
					Offer
				</th>

				<th class="smaller nosort">
					Approved
				</th>

				<th class="smaller nosort">
					Confirmed
				</th>

				<th class="nosort">
				</th>
			
			</thead>

			<tbody>

%			foreach my $tourn ($m->comp("/funclib/tourn_exchange.mas")) { 

%				my $judge =  $judge_by_tourn{$tourn->id};

				<tr>

					<td>
%						if ($tourn->webname) {
							<a class="small nowrap white block" href="http://<% $tourn->webname %>.tabroom.com">
%						} else { 
							<a class="small nowrap white block" href="/index/tourn/index.mhtml?tourn_id=<% $tourn->id %>">
%						}
							<% $tourn->name %>
						</a>
					</td>

					<td>
						<% Tab::niceshortdate($tourn->start) %>
						<% $tourn->start->day != $tourn->end->day ? " - ".Tab::niceshortdate($tourn->end) : "" %>
					</td>

					<td class="centeralign">
						<% $tourn->location %>
					</td>

					<td class="centeralign">
						<% $judge ? $judge->hire_offer : "" %>
					</td>

					<td class="centeralign">
						<% $judge && $judge->hire_approved ? "Yes" : "No" %>
					</td>

					<td class="centeralign">
						<% $judge ? $judge->obligation + $judge->hired : "" %>
					</td>

					<td class="centeralign">
						<a class="dkgreen block" href="hire_edit.mhtml?tourn_id=<% $tourn->id %>">
							HIRE
						</a>
					</td>

				</tr>

%			}

			</tbody>

		</table>

	</div>




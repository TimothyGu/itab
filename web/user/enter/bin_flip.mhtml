<%args>
	$school_id
	$judge_id
	$bin_id
</%args>
<%init>

	my $bin = Tab::Bin->retrieve($bin_id);
	my $school = Tab::School->retrieve($school_id);
	my $judge = Tab::Judge->retrieve($judge_id);
	
	my $strike =  $bin->strike($judge);

	if ($strike) { 

		$strike->delete;

	} else { 

		my $strike = Tab::Strike->create({
			tournament  => $school->tournament->id,
			bin         => $bin->id,
			type        => "time", 
			judge       => $judge->id,
			start       => $bin->start,
			end         => $bin->end
		});

	}

	$m->redirect("judge_timebins.mhtml?school_id=".$school->id."&judge_id=".$judge->id);

</%init>

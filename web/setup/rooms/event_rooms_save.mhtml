<%args>
	$room_id
	$event_id
	$type
</%args>
<%init>

	my @room_pools = Tab::RoomPool->search( event => $event_id, room => $room_id );

	if ($type eq "a") { 
		foreach my $pool (@room_pools) { 
			$pool->delete;
		}
	}

	unless ($type eq "a") { 
	
		my $reserved = 1 if $type eq "r";

		my $pool = Tab::RoomPool->create({
			room     => $room_id,
			event    => $event_id,
			reserved => $reserved
		});

	}

	return;

</%init>

<%args>
	$tourn
	$site_id => undef
</%args>
<%init>

	$m->abort unless $site_id;

	my $site = Tab::Site->retrieve($site_id);

	foreach my $room ($site->rooms) { 
		my $name = $ARGS{$room->id."_name"};
		$name =~ s/\s+$//;

		$room->name($name);
		$room->quality($ARGS{$room->id."_quality"});
		$room->capacity($ARGS{$room->id."_capacity"});
		$room->ada($ARGS{$room->id."_ada"});
		$room->notes($ARGS{$room->id."_notes"});
		$room->update;
	}

	$m->redirect("$Tab::url_prefix/setup/rooms/list.mhtml?site_id=$site_id");

</%init>

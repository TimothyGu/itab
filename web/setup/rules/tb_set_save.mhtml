<%args>
	$tourn
	$name
	$type => undef
	$elim => undef
	$tb_set_id => undef
</%args>
<%init>

	my $msg;
	my $tb_set;

	if ($tb_set_id) {  

		$tb_set = Tab::TiebreakSet->retrieve($tb_set_id);
		$tb_set->name($name);
		$tb_set->elim($elim);
		$tb_set->update;

		$msg = "Tiebreak set $name updated";

	} else { 

		$type = "Team" unless $type;

		$tb_set = Tab::TiebreakSet->create({
			tourn => $tourn->id,
			name => $name,
			type => $type,
			elim => $elim
		});

		$msg = "Tiebreak set $name created";

	}

	$m->redirect("tiebreaks.mhtml?tb_set_id=".$tb_set->id."&type=$type&msg=$msg");

</%init>

<%args>
	$tourn
	$type => "place"
</%args>
<%init>
	
	my (%cume_settings) = $m->comp("/funclib/tourn_cume_sweeps.mas", tourn => $tourn);
	my (%place_settings) = $m->comp("/funclib/tourn_place_sweeps.mas", tourn => $tourn);

	foreach my $place (keys %place_settings) {

		my $sweep = $place_settings{$place};

		if ($ARGS{"place_value_".$place} > 0) { 
			$sweep->tag("sweep_place_".$ARGS{"place_".$place});
			$sweep->value($ARGS{"place_value_".$place});
			$sweep->update;
		} else { 
			$sweep->delete; 
		}
	} 

	foreach my $cume (keys %cume_settings) {

		my $sweep = $cume_settings{$cume};

		if ($ARGS{"cume_value_".$cume} > 0) { 

			$sweep->tag("sweep_cume_".$ARGS{"cume_".$cume});
			$sweep->value($ARGS{"cume_value_".$cume});
			$sweep->update;

		} else { 
			$sweep->delete; 
		}
	}

	if ($ARGS{"place_new"} > 0 && $ARGS{"place_value_new"} > 0) { 
		$tourn->setting("sweep_place_".$ARGS{"place_new"}, $ARGS{"place_value_new"});
	}

	if ($ARGS{"cume_new"} > 0 && $ARGS{"cume_value_new"} > 0) { 
		$tourn->setting("sweep_cume_".$ARGS{"cume_new"}, $ARGS{"cume_value_new"});
	}

	my $msg = "Sweepstakes point values saved";
	$m->redirect("sweeps.mhtml?msg=$msg#end");

</%init>

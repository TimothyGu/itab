<%args>
	$circuit
	$tourn
	$group_id
	$new => undef
</%args>
<%init>

	my @sites = $tourn->sites;

	my $group = Tab::JudgeGroup->retrieve($group_id) if $group_id;

	unless (@sites) { 

		my $err = "You have to set up a site/location for your tournament before you can create judge pools.";
		$m->redirect("/setup/rooms/manage_sites.mhtml?err=$err");

	}

	my $switch;

</%init>

	<& menubar.mas, group_id => $group_id, tourn => $tourn, page => "pools" &>

	<div id="leftbig">

		<h2>Judge pools in division <% $group->id %></h2>

		<table cellpadding="4" cellspacing="1" width="100%">

			<tr class="lirdrow">
				
				<th>
				</th>
				
				<th class="smaller">
					Pool Name
				</th>

				<th class="smaller">
					Standby
				</th>

				<th class="smaller">
					Register
				</th>

				<th class="smaller">
					Reg Burden
				</th>

				<th>
					<form action="pool_save.mhtml" method="post">
					<input type="hidden" name="group_id" value="<% $group->id %>">
				</th>

			</tr>

%			foreach my $pool ($group->pools) { 

				<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >

					<td>
						<a class="whiteblock" href="pool_judges.mhtml?pool_id=<% $pool->id %>">
							Judges
						</a>
					</td>

					<td>
						<input type="text" name="<% $pool->id %>_name" size="20" value="<% $pool->name %>">
					</td>

					<td class="center">
						<input type="checkbox" name="<% $pool->id %>_standby" value="1" <% ($pool->standby) ? "checked" : ""  %>  >
					</td>

					<td class="center">
						<input type="checkbox" name="<% $pool->id %>_registrant" value="1" <% ($pool->registrant) ? "checked" : ""  %>  >
					</td>

					<td class="center">
						<input type="text" name="<% $pool->id %>_burden" size="3"  value="<% $pool->burden %>">%
					</td>

					<td class="smaller" align="center">
						<a href="pool_rm.mhtml?pool_id=<% $pool->id %>" class="whiteblock">
							Delete
						</a>
					</td>

				</tr>

%			}

%			if ($group->pools) { 
	
				<tr>
					<td colspan="6">
						<hr />
					</td>
				</tr>

%			}

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >

				<th class="smaller">
					New
				</td>

				<td>
					<input type="text" name="new_name" size="20">
				</td>

				<td class="center">
					<input type="checkbox" name="new_standby" value="1">
				</td>


				<td class="center">
					<input type="checkbox" name="new_registrant" value="1">
				</td>

				<td class="center">
					<input type="text" name="new_burden" size="3">%
				</td>

				<td>
				</td>

			</tr>

			<tr class="liblrow">

				<td colspan="6" class="right">
					<input type="submit" value=" Save Changes " style="width: 150px;" class="smaller">
					</form>
				</td>


			</tr>

		</table>


	</div>

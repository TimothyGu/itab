<%args>
	$group_id
</%args>
<%init>

	my $group = Tab::JudgeGroup->retrieve($group_id);

	foreach my $qual ($group->quals( type => "mpj" )) { 

		$qual->name($ARGS{$qual->id."_name"});
		$qual->max($ARGS{$qual->id."_max"});
		$qual->min($ARGS{$qual->id."_min"});
		$qual->strike($ARGS{$qual->id."_strike"});
		$qual->conflict($ARGS{$qual->id."_conflict"});
		$qual->update;

	}

	if ( $ARGS{"new_name"} ) { 

		my $qual = Tab::Qual->create({
			name 		=> $ARGS{"new_name"},
			max 		=> $ARGS{"new_max"},
			min 		=> $ARGS{"new_min"},
			strike 		=> $ARGS{"new_strike"},
			conflict 	=> $ARGS{"new_conflict"},
			judge_group => $group_id,
			type 		=> "mpj"
		});

	}

	my $msg = "MPJ/Community ratings are saved";
	$m->redirect("$Tab::url_prefix/setup/judges/scale.mhtml?group_id=$group_id&msg=$msg");
	
</%init>

<%args>
	$circuit
	$tourn
	$err => undef
</%args>
<%init>

</%init>

<h3>Recode judges</h3>

<p class="err"><% $err %></p>

<table cellpadding="6" width="100%" cellspacing="1">

%	my $switch; 

	<tr class="bluerow">
		<th>Judge Group</th>
		<th style="text-align: center;">Low Code</th>
		<th style="text-align: center;">High Code</th>
		<th>Starting with:</th>
		<th colspan="4">Recode grouping by: </th>

%	foreach my $group ( sort {$a->name cmp $b->name} $tourn->groups) { 

	<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >

		<td>
		<form action="judgegroup_recode.mhtml" method="post">
		<input type="hidden" name="group_id" value="<% $group->id %>">

		<a href="<% $Tab::url_prefix %>/register/judge_groupview.mhtml?group_id=<% $group->id %>">
		<% $group->name %></a></td>

		<td align="right" style="padding-right: 15px">
			<% Tab::Judge->sql_lowest_code->select_val($group->id) %></td>

		<td align="right" style="padding-right: 15px">
			<% Tab::Judge->sql_highest_code->select_val($group->id) %></td>

		<td align="center">	
			<input type="text" name="codestart" value="<% Tab::Judge->sql_lowest_code->select_val($group->id) %>" size="5">
		</td>

		<td align="center">	
			<input  type="submit" name="sort_by" value="Randomly">
		</td>

		<td align="center">	
			<input  type="submit" name="sort_by" value="School">
		</td>

%		if ($circuit->diocese_based | $circuit->region_based) { 

		<td align="center">	
			<input  type="submit" name="sort_by" value="<% ($circuit->diocese_based) ? "Diocese" : "Region" %>">
		</td>

%	}

		<td align="center">	
			<input  type="submit" name="sort_by" value="Name">
			</form>
		</td>

	</tr>

%	my @pools;

%	foreach my $pool (@pools) {

		<tr <% ($switch++ % 2) ? "class=\"bluerow\"" : "class=\"liblrow\""%> >

			<td>
			<form action="judgepool_recode.mhtml" method="post">
			<input type="hidden" name="pool_id" value="<% $pool->id %>">
			--- <% $pool->name %></td>

			<td align="right" style="padding-right: 15px">
				<% Tab::Judge->sql_lowest_pool_code->select_val($pool->id) %></td>

			<td align="right" style="padding-right: 15px">
				<% Tab::Judge->sql_highest_pool_code->select_val($pool->id) %></td>

			<td align="center">	
				<input type="text" name="codestart" 
					value="<% Tab::Judge->sql_lowest_pool_code->select_val($pool->id) %>" size="5">
			</td>

			<td align="center">	
				<input  type="submit" name="sort_by" value="Randomly">
			</td>

			<td align="center">	
				<input  type="submit" name="sort_by" value="School">
			</td>

%			if ($circuit->diocese_based | $circuit->region_based) { 

				<td align="center">	
					<input  type="submit" name="sort_by" 
					value="<% ($circuit->diocese_based) ? "Diocese" : "Region" %>">
				</td>
%			}

			<td align="center">	
				<input  type="submit" name="sort_by" value="Name">
				</form>
			</td>

		</tr>
%	}

% }

</table>




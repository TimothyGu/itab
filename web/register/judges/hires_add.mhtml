<%args>
	$tourn
	$group_id
</%args>
<%init>

	my $group = Tab::JudgeGroup->retrieve($group_id);

	my @hired_judges =  Tab::Judge->search( spare_pool => 1, 
											judge_group => $group->id );


	my @classes = $group->classes;

	my @quals = sort {$a->name cmp $b->name} $tourn->quals( type => "coach");

	my $qual_def = $tourn->method->default_qualification->id;


</%init>

	<& sidebar.mas, tourn => $tourn, whoami => "hires_add", group => $group&>

	<div class="left huge">

		<h2>Add Hired judges in <% $group->abbr %></h2>

		<p>You have <% scalar @hired_judges %> hired judges so far</p>

		<table cellpadding="6" cellspacing="0" width="100%">

			<tr>

				<th>
					<form action="hires_save.mhtml" method="post">
					<input type="hidden" name="group_id" value="<% $group->id %>">
					First
				</th>
			
				<th>
					Last
				</th>

				<th>
					Special
				</th>
			
% 				if ($group->coach_ratings) { 
%					my $didit;
%					foreach my $subset ($group->qual_subsets) { 
						<th>
							<% $subset->name %>
						</th>
%						$didit++;
%					}

%					unless ($didit) { 

						<th>
							Rating
						</th>
%					}

%				}

		</tr>

%	my $switch;

%	foreach my $tick (1 .. 10) {

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

			<td>
				<input type="text" name="first_<% $tick %>" size="15">
			</td>

			<td>
				<input type="text" name="last_<% $tick %>" size="15">
			</td>

			<td>
				<input type="text" name="special_<% $tick %>" size="20">
			</td>

% 			if ($group->coach_ratings) { 

%				my $didit;
%				foreach my $subset ($group->qual_subsets) { 
					<td>
						<select name="<% $subset->id %>_<% $tick %>">
%							foreach my $qual ($group->quals( type => "qual" )) { 
								<option value="<% $qual->id %>">
									<% $qual->name %>
								</option>
%							}
						</select>

					</td>

%					$didit++;

%				} 

%				unless ($didit) { 

					<td>
						<select name="qual_<% $tick %>">
%							foreach my $qual ($group->quals( type => "qual" )) { 
								<option value="<% $qual->id %>">
									<% $qual->name %>
								</option>
%							}
						</select>
					</td>

%				}
%			}
		
		</tr>

%	}

		<tr class="liblrow">
			<td colspan="7" align="right">
				<input class="blue" type="submit" value="Add Judges to Tournament">
				</form>
			</td>
		</tr>

	</table>


	</div>

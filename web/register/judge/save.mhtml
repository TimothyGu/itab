<%args>
	$tourn
	$account
	$judge_id
</%args>
<%init>

	my $judge = Tab::Judge->retrieve($judge_id);

	my $err;

	my $max = $judge->group->setting("max_rounds");
	my $obligation = $ARGS{"obligation"};

	if ($obligation > $max && $max > 0) { 
		$obligation = $max;
		$err = "No judge can cover more than $max rounds of obligation.  Round burden reduced";
	}


	$judge->code($ARGS{"code"});
	$judge->covers($ARGS{"covers"});
	$judge->school($ARGS{"school"});
	$judge->judge_group($ARGS{"judge_group"});
	$judge->covers($ARGS{"covers"});
	$judge->obligation($ARGS{"obligation"});
	$judge->alt_group($ARGS{"alt_group"});
	$judge->active($ARGS{"active"});
	$judge->setting("neutral", $ARGS{"neutral"});
	$judge->special($ARGS{"special"});
	$judge->notes($ARGS{"notes"});

	$judge->update;

	my $msg = "Judge information saved";

	$m->redirect("edit.mhtml?judge_id=$judge_id&msg=$msg&err=$err");

</%init>

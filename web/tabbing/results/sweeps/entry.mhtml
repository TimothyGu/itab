<%args>
	$tourn
</%args>
<%init>

	my ($pointsref, $entref) = $m->comp("sweep_tourn.mas", tourn => $tourn);

	my %event_by_id = ();

	foreach my $event ($tourn->events) {
		$event_by_id{$event->id} = $event->abbr;
	}

</%init>

	<div class="left huge">

		<h2>Individual Sweeps</h2>

		<& /funclib/tablesorter.mas, table => "sortme" &>

		<table cellpadding="3" cellspacing="1" id="sortme">

			<thead>
				<tr class="yellowrow">

					<th>
						Code
					</th>

					<th>
						Event
					</th>

					<th>
						Name
					</th>

					<th>
						School
					</th>

					<th>
						Points
					</th>

				</tr>
			</thead>

			<tbody>

%				foreach my $ent (sort { ${$pointsref}{$b->id} <=> ${$pointsref}{$a->id}} @{$entref}) { 

%					next unless ${$pointsref}{$ent->id};
			
					<tr>

						<td>
							<% $ent->code %>
						</td>

						<td>
							<% $event_by_id{$ent->event->id} %>
						</td>

						<td>
							<% $ent->name %>
						</td>

						<td>
							<% $ent->school->short_name %>
						</td>

						<td>
							<% ${$pointsref}{$ent->id} %>
						</td>

					</tr>

%				}

			</tbody>

		</table>


	</div>

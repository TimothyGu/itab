<%args>
	$account
	$chapter_id
	$certain => undef
</%args>
<%init>

	my $chapter = Tab::Chapter->retrieve($chapter_id);

	if ($certain eq "I am certain") {
		my @ch_ls = Tab::ChapterCircuit->search(chapter => $chapter_id);
		foreach (@ch_ls) {
			$_->delete;
		}

		$chapter->delete;
		$m->redirect("$Tab::url_prefix/circuit/chapters.mhtml");
	}

</%init>

<&  "/funclib/warning.mas", account => $account &>

<br><br>
<br><br>
<center>
<P><B>You are about to permanently delete the chapter <% $chapter->name %></b></p>
<p>This action cannot be undone.</p>

<p>If there are students or tournament entries still active for this chapter
you will likely cause all kinds of hell to break out in the database.</p>

<p>Don't say I didn't warn you.</p>

% if ($certain) {

<p><font color="red">You did not type "I am certain", exactly like that.  Try
again</font></p>

% }

<br><br>
<p>To proceed, type "I am certain" in the box below:</p>
<br><br>
<form action="chapter_rm.mhtml" method="post">
<input type="hidden" value="<% $chapter_id %>" name="chapter_id">
<p align="center">
<input type="text" name="certain" size="20"></p>
<p align="center">
<input class="red" type="submit" value="Delete Chapter"></p>
</center>
</form>

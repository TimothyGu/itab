<%args>
	$circuit
	$name
	$display_order => undef
	$text => undef
	$link_id => undef
</%args>
<%init>

	my $link = Tab::Link->retrieve($link_id);

	if ($link) { 

		$link->name($name);
		$link->display_order($display_order);
		$link->text($text);
		$link->update;

	} else { 

		$link = Tab::Link->create({
			name => $name,
			display_order => $display_order,
			text => $text,
			active => 1,
			circuit => $circuit->id
		});

	}

	my $err = "Link ".$link->name." has been updated " if $link_id;

	$m->redirect("$Tab::url_prefix/circuit/website.mhtml?err=$err");

</%init>

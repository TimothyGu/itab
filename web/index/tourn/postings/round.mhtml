<%args>
	$account => undef
	$tourn
	$event_id => undef
	$round_id => undef
</%args>
<%init>

	my $event = Tab::Event->retrieve($event_id) if $event_id;
	my $round = Tab::Round->retrieve($round_id) if $round_id;
	$event = $round->event unless $event;
	$tourn = $event->tourn;

	my @rounds = sort {$a->name <=> $b->name} $event->rounds( published => 1 );

</%init>

	<div class="left huge">

%	if ($event) { 

		<h2>
			<% $event->name %>
			<% ($round & $round->label) ? $round->label : "R".$round->name %>: 
			<% &Tab::nicetime($round->timeslot->start->set_time_zone($tourn->tz)) %>
		</h2>

		<ul id="tabnav">

%			foreach my $allround (@rounds) {
				<li class="<% ($allround->id == $round->id) ? "selected" : "" %>">
					<a href="show.mhtml?round_id=<% $allround->id %>"> 
						<% $allround->realname %>
					</a>
				</li>
%			}

		</ul>

%		if ($round) { 

%	 		if ( $event->type eq "speech" ) { 
				<& show_speech.mas, round => $round, show => $show &>
%			}

%	 		if ( $event->type eq "congress" ) { 
				<& show_congress.mas, round => $round &>
%			}

% 			if ( $event->type eq "debate" || $event->type eq "policy" ) { 
				<& show_debate.mas, round => $round &>
%			}

%		}

	</div>


<%args>
	$entry_id
</%args>
<%init>

	my $entry = Tab::Entry->retrieve($entry_id);
	my $event = $entry->event;
	my $tourn = $event->tourn;

	my $switch; 

</%init>

	<& sidebar.mas, tourn_id => $tourn->id, event_id => $event->id &>

	<div class="left huge">

        <h2>
			<% $entry->name %> Record
        </h2>

        <& ../tourn_header.mas, tourn => $tourn &>

		<table cellpadding="4" cellspacing="1">

%		foreach my $panel ($m->comp('/funclib/entry_panels.mas', entry => $entry, published => 1)) { 

%			my @judges = $m->comp("/funclib/panel_judges.mas", panel => $panel);
%			my $opp = Tab::Entry->retrieve($panel->opp) if $panel->opp;
%			my $side = "Aff" if $panel->side == 1;
%			my $side = "Neg" if $panel->side == 2;
%			$side = "Bye" if $panel->bye;

			<tr class="<% ($switch++ % 2) ? "oddrow" : "evenrow" %>">

				<td>
					<% $panel->round->realname %>
				</td>
				
				<td>
					<% ($panel->room) ? $panel->room->name : "" %>
				</td>

				<td>
					<% $side %>
				</td>

				<td>
%					foreach my $judge (@judges) { 
						<% ucfirst substr($judge->first,0,2) %> <% ucfirst $judge->last %>
%					}
				</td>

			</tr>

%		}

%		foreach my $panel ($m->comp('/funclib/entry_panels.mas', entry => $entry, post_results => 1)) { 

%			my @judges = $m->comp("/funclib/panel_judges.mas", panel => $panel);
%			my $opp = Tab::Entry->retrieve($panel->opp) if $panel->opp;
%			my $side = "Aff" if $panel->side == 1;
%			my $side = "Neg" if $panel->side == 2;
%			$side = "Bye" if $panel->bye;

			<tr class="<% ($switch++ % 2) ? "oddrow" : "evenrow" %>">

				<td>
					<% $panel->round->realname %>
				</td>
				
				<td>
					<% ($panel->room) ? $panel->room->name : "" %>
				</td>

				<td>
					<% $side %>
				</td>

%					foreach my $judge (@judges) { 
						<% ucfirst substr($judge->first,0,2) %> <% ucfirst $judge->last %>
%					}
				</td>

			</tr>

			</tr>

%		}

		</table>


	</div>


<%args>
	$tourn_id
	$account => undef
</%args>
<%init>

	my $tourn =  Tab::Tourn->retrieve($tourn_id);
	my $switch;

	my @schools = sort {uc $a->short_name cmp uc $b->short_name} $tourn->schools;
	my %states = {};

</%init>

	<div class="left huge">

        <h2>
            <% $tourn->name %>: <% $tourn->location %>  
        </h2>

        <& tourn_header.mas, tourn => $tourn, account => $account &>

		<div class="half left">

			<table cellpadding="4" cellspacing="1" width="100%">

%				foreach my $school (@schools) { 

%					if ($switch > (scalar @schools)/2) { 
%						undef $switch;
						</table>
						</div>
						<div class="half right">
						<table cellpadding="4" cellspacing="1" width="100%">
%					}

					<tr class="<% ($switch++ % 2) ? "oddrow" : "evenrow" %>">

						<td class="halfspan">
							<% $school->name %>
						</td>

						<td>
							<% $school->chapter->state %>
%							$states{$school->chapter->state}++;
						</td>

					</tr>

%				}

			</table>

		</div>
	</div>

	<div class="right small">

		<div class="sidenote">

			<h4>Stats</h4>
				
				<span class="white block">
					<% scalar $tourn->schools %> Schools
				</span>

				<span class="white block">
					<% scalar keys %states %> States
				</span>

		</div>

	</div>

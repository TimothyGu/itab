<%args>
	$tourn
	$judge_id
	$panel_id
	$from => undef
</%args>
<%perl>

	my $judge = Tab::Judge->retrieve($judge_id);
	my $panel = Tab::Panel->retrieve($panel_id);

	unless ($judge->tournament->id == $tourn->id && $panel->event->tournament->id == $tourn->id) { 

		$m->print("<p class=\"err\">You screwed something up.  I call shenanigans!</p>");

		$m->print("<p>Judge T: ".$judge->tournament->id);
		$m->print("<p>Panel T: ".$panel->event->tournament->id);
		$m->print("<p>T: ". $tourn->id);
		$m->abort;

	}

	$panel->set_chair($judge);

	$m->redirect($Tab::url_prefix."/panel/prepanel_judges.mhtml?panel_id=".$panel->id) if $from eq "pre";
	$m->redirect($Tab::url_prefix."/panel/panel_view.mhtml?panel_id=".$panel->id);


</%perl>

<%args>
	$tourn
	$round_id
</%args>
<%init>

	my $round = Tab::Round->retrieve($round_id);

	my $tz = $tourn->tz;
	$tz = "UTC" unless $tz;

	my @entries = sort {$a->name cmp $b->name} $m->comp("/funclib/round_entries.mas", round => $round);

	my $switch;
	my $event = $round->event;

</%init>

	<div class="left huge">

		<h4><% $round->realname %> active entries</h4>

%		foreach my $entry (@entries) { 

			<div class="block <% ($switch++ % 2) ? "oddrow" : "evenrow" %>">

				<span class="halfspan">
%					my $notfirst;
%					foreach my $student ($entry->students) { 
						<% $notfirst ? " & " : "" %>
						<% $student->first." ".$student->last %>
%						$notfirst++;
%					}
				</span>

				<span class="halfspan">
					<% $entry->school->name %><% $entry->school->chapter ? ", ".$entry->school->chapter->state : "" %>
				</span>

			</div>

%		}



	</div>


%    my $start = $round->start_time;
%    $start = $round->timeslot->start unless $start;
%    $start->set_time_zone($tz);

	<div class="right small">

		<div class="sidenote">

			<h4>Share & Enjoy</h4>

            <div class="block evenrow">
                Start time:

				<% Tab::nicetime($start)." ".Tab::tzname($tz) %>
            </div>

			<a class="blue block" href="show.mhtml?round_id=<% $round->id %>">
				Return to Pairing
			</a>

			<a class="blue block" href="/panel/report/schematic.mhtml?round_id=<% $round->id %>&event_id=<% $round->event->id %>">	
				Print Pairing
			</a>

		</div>

		<div class="sidenote">

			<h4>Stats & Data</h4>

%			if ($event->type eq "wudc") {
				<span class="thirdblock">
					Motion
				</span>
				<span class="twothirdblock">
					<% $round->motion ? "Entered" : "Not Entered" %>
				</span>
%			}


			<span class="thirdblock">
				Paired:
			</span>

			<span class="twothirdblock">
				<% $round->created ? &Tab::nicedt($round->created->set_time_zone($tourn->tz)) : "Not recorded" %>
			</span>

			<span class="thirdblock">
				Finished: 
			</span>
			<span class="twothirdblock">
				<% $round->completed ? &Tab::nicedt($round->completed->set_time_zone($tourn->tz)) : "Not recorded" %>
			</span>

			<span class="thirdblock">
				Blasted:
			</span>
			<span class="twothirdblock">
				<% $round->blasted ? &Tab::nicedt($round->blasted->set_time_zone($tourn->tz)) : "Not yet blasted" %>
			</span>

		</div>

	</div>


<%args>
	$circuit
	$last_name
	$tourn
</%args>
<%init>

	$last_name = "%".$last_name."%";

	my @comps = Tab::Comp->search_mult_last_name($last_name, $tourn->id);
	push (@comps, Tab::Comp->search_stud_last_name($last_name, $tourn->id));
	push (@comps, Tab::Comp->search_part_last_name($last_name, $tourn->id));
	push (@comps, Tab::Comp->search_team_last_name($last_name, $tourn->id));

	#uniq
	my %seen = ();
	@comps = grep { ! $seen{$_->id} ++ } @comps;

	if (scalar @comps == 1) { 

		$m->redirect("comp_card.mhtml?comp_id=".$comps[0]->id);

	}

	@comps = sort {$a->code <=> $b->code} @comps;

</%init>

	<div class="left huge">

		<h2>Which one do you mean?</h2>

%	 	my $switch;

%		foreach my $comp (@comps) { 

%           my $block = "grey block" unless $switch % 2;
%           $block = "whiteblock" if $switch % 2;
%			$switch++;

			<a class="<% $block %>" href="comp_card.mhtml?comp_id=<% $comp->id %>">
				<% $comp->code." in ".$comp->event->abbr %>: <% $comp->team_name %> from <% $comp->school->short_name %>
			</a>

%		}

	</div>

	<br style="clear: both;">


<%args>
	$tourn
	$event_id => undef
</%args>
<%init>

	my $event = Tab::Event->retrieve($event_id) if $event_id;

	my @schools = $m->comp("/funclib/event_schools.mas", event => $event) if $event;

</%init>

%		if ($event) { 

			<div class="left huge">

			<h2>
				<% scalar @schools %> Schools registered for <% $event->name %>
			</h2>

%			my $switch;

			<table cellpadding="5" cellspacing="1" width="100%"> 
			
%				foreach my $school (@schools) { 

					<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

						<td>
							<a class="white block" href="/register/school/entries.mhtml?school_id=<% $school->id %>&event_id=<% $event->id %>">
							<% $school->name %>
							</a>
						</td>

						<td>
							<% $school->code %>
						</td>

						<td>
							<% $school->chapter->state %>
						</td>
						
					</tr>

%				}

			</table>

%		} else { 

			<div class="left huge">

			<h2> 
				Choose an event at right
			</h2>
%		}

	</div>

	<div class="right small">
		
		<div class="sidenote">

			<a href="index.mhtml" class="yellow block">
				Return to Events Listing
			</a>

			<h4>Events:</h4>

%			foreach my $event (sort {$a->name cmp $b->name} $m->comp("/funclib/tourn_events.mas", tourn => $tourn)) { 
				<a class="<% ($event->id == $event_id) ? "dk" : "" %>blue block" href="schools.mhtml?event_id=<% $event->id %>">
					<% $event->name %>
				</a>
%			}
	
		</div>

	</div>

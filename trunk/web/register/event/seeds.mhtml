<%args>
	$event_id
	$tourn
</%args>
<%init>

	my $event = Tab::Event->retrieve($event_id);

	my @entries = Tab::Entry->search( event => $event->id, unconfirmed => 0, dropped => 0, waitlist => 0 );

	my $no_codes++ if $event->setting("code_style") eq "names";

	@entries = sort {$a->name <=> $b->name} @entries;
	@entries = sort {$a->code <=> $b->code} @entries unless $no_codes;
	@entries = sort {$a->seeds <=> $b->seeds} @entries;


</%init>

	<& sidebar.mas, tourn => $tourn, event => $event, seeds => "yup" &>

	<div class="left huge">
	
		<& /funclib/tablesorter.mas, table => "sortme" &>

		<table cellpadding="1" cellspacing="1" width="100%" id="sortme">

			<thead>

				<tr class="yellowrow">

%					unless ($no_codes) { 
						<th class="smaller">
							Code
						</th>
%					}

					<th class="smaller">
						Entry Name
					</th>

					<th class="smaller">
						School
					</th>

					<th class="smaller">
						Seed
					</th>

				</tr>
			</thead>

			<tbody>

%				foreach my $entry (@entries) { 

					<tr>

%						unless ($no_codes) { 
							<td class="smallish">
								<a class="plain block" href="/register/entry/edit.mhtml?entry_id=<% $entry->id %>">
									<% $entry->code %>
								</a>
							</td>
%						}

						<td class="smallish">
							<a class="plain block" href="/register/entry/edit.mhtml?entry_id=<% $entry->id %>">
								<% $entry->name %>
							</a>
						</td>

						<td class="smallish">
							<a class="plain block" href="/register/school/entries.mhtml?event_id=<% $entry->event->id %>&school_id=<% $entry->school->id %>">
								<% $entry->school->short_name %> 
							</a>
						</td>
					</td>

					<td class="smallish">
						<span class="hidden"> <% $entry->seed %> </span>
						<input type="text" name="<% $entry->id %>" value="<% $entry->seed %>" size="10">
					</td>

				</tr>
%			}

			</tbody>

			<tr class="liblrow">

				<td colspan="5" class="rightalign">
					<input type="submit" value="Save Seeds">
					</form>
				</td>

			</tr>

		</table>

	</div>


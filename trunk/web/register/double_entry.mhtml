<%args>
	$tourn
	$circuit
</%args>

<h3>Double Entry report</h3>

<table cellpadding="3" width="100%">


%	my $switch;


% foreach my $event ($m->comp("/funclib/tourn_events.mas", tourn => $tourn)) { 


	<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
	
	<th><% $event->abbr %></th>


<%perl>
	my @comps = Tab::Comp->search_double_entries($event->id);
	push (@comps, Tab::Comp->search_double_partners($event->id));
	push (@comps, Tab::Comp->search_double_partners_twice($event->id));

	foreach my $ev (sort {$a->name cmp $b->name} $m->comp("/funclib/tourn_events.mas", tourn => $tourn)) { 

		next if $ev->id == $event->id;	
	
		my $count;

		foreach my $c (@comps) { 

			$count++ if $c->event->id == $ev->id;
		}

		$m->print("<td>".$ev->abbr." ".$count."</td>") if $count;	

	}
</%perl>

</tr>

% }




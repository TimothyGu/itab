<%args>
	$tourn
	$session
</%args>

%	my $student_total;
%	my $judge_total;
% 	my $switch;

	<div id="rightsmall">

        <a class="blueblock" href="headcount_print.mhtml">
            Print Headcount
        </a>

        <& "reports_menu.mas", class => "stats", circuit => $tourn->circuit, nodiv => "true" &>

	</div>


	<div id="leftbignb">

		<h2>Headcounts for Schools</h2>

		<table cellpadding="5" cellspacing="1" width="100%">

			<tr class="liblrow">
				<th class="smaller">
					School
				</td>
				<th class="smaller">
					Students
				</td>
				<th class="smaller">
					Judges
				</td>
				<th class="smaller">
					Warm Bodies
				</td>
			</tr>

%			foreach my $school (sort {$a->name cmp $b->name} $tourn->schools) { 

%				$student_total += scalar($school->students);
%				$judge_total += scalar($school->judges);
		
				<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

					<th class="smaller">
						<% $school->name %>
					</th>

					<td class="right">
						<% scalar($school->students) %>
					</td>

					<td class="right">
						<% scalar($school->judges) %>
					</td>

					<td class="right">
						<% scalar($school->students) + scalar($school->judges) %>
					</td>

				</tr>


%			}

			<tr class="lirdrow">

				<th>
					Totals:
				</th>

				<td class="right">
					<% $student_total %>
				</td>

				<td class="right">
					<% $judge_total %>
				</td>

				<td class="right">
					<% $student_total + $judge_total %>
				</td>

			</tr>

		</table>

	</div>


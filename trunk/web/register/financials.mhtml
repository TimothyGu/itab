<%args>
	$league
	$tourn
	$account
	$debug => undef
</%args>
<%init>	
	use POSIX;

	my @schools = $tourn->schools;
	system "$Tab::logger There are ".scalar @schools." schools." if $debug;

	my $reg_total;
	my $total_take;

	foreach my $school (@schools) { 
		
		my ($fee, $feline_ref) = $m->comp("/funclib/school_fees.mas", school_id => $school->id);

		$reg_total += $fee;
		$total_take = $total_take  + $school->paid_amount;

	}

	$reg_total = sprintf "%.2f", $reg_total;
  	1 while $reg_total =~ s/^(-?\d+)(\d\d\d)/$1,$2/;

	$total_take = sprintf "%.2f", $total_take;
  	1 while $total_take =~ s/^(-?\d+)(\d\d\d)/$1,$2/;

	my $switch;

</%init>

	<div id="leftbig">

	<h2>Financials for <% $tourn->name %></h2>

	<table cellpadding="5" cellspacing="1" width="100%">

	<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

		<tr>

			<th>
				Registration Fees:
			</th>
			
			<td align="right">
				$<% $reg_total %>
			</td>
			
		</tr>

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
		
			<th>
				Taken so far
			</th>
			
			<td align="right">
				$<% $total_take %>
			</td>
		</tr>

	</table>

	</div>

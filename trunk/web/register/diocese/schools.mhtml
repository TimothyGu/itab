<%args>
	$diocese
	$tourn
	$err => undef
</%args>
<%init>

	$diocese = Tab::Region->retrieve($diocese);
	my @schools = sort {$a->name cmp $b->name} $diocese->schools(tournament => $tourn->id);

</%init>

<div class="left huge">

	<table width="100%">

		<tr>
			<td width="100%">
				<h2>Schools from <% $diocese->name." (".$diocese->code.")" %></h2>
			</td> 
			
			<td>
				<form action="dioceses.mhtml" method="post">
				<input type="hidden" name="diocese_id" value="<% $diocese->id %>">
				<input  type="submit" value="Return to <% $diocese->name %>">
				</form>
			</td>
		</tr>
		
	</table>


	<table cellpadding="6" cellspacing="1" width="100%">

%		my $switch;

		<tr class="liblrow">

			<th>
				School
			</th>

			<th class="smaller">
				Entries
			</th>

			<th class="smaller">
				Judges
			</th>

			<th>
			</th>

		</tr>


% 		foreach my $school (@schools) { 

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>> 
			
				<td>
					<% $school->chapter->name %>
				</td>
				
				<td class="center">
					<% scalar $school->comps %> 
				</td> 
				
				<td class="center">
					<% scalar $school->judges %> 
				</td>
				
				<th style="text-align: center;">
					(<a href="<% $Tab::url_prefix %>/register/school_view.mhtml?school_id=<% $school->id %>">View</a>)
				</td>
				
			</tr>

% 		}

	</table>

	</div>

	<& sidebar.mas, tourn => $tourn, diocese => $diocese &>

	<br style="clear: both;" \>

<%args>
	$league
	$tourn
	$group_id
</%args>

<%init>

	my $group = Tab::JudgeGroup->retrieve($group_id);

	my @requests = $group->hires;
 	@requests = sort {$a->request_made->epoch <=> $b->request_made->epoch} @requests;

</%init>

	<table>
		<tr>
			<td width="100%">
				<h3>Judge requests for <% $tourn->name %></h3>
			</td>

			<td>
				<form action="judges.mhtml" method="post">
				<input type="submit" value="Return to <% $group->abbr %> Judge Registration">
				</form>
			</td>
		</tr>
	</table>

	<table cellpadding="5" cellspacing="1" width="100%">

		<tr class="liblrow">
			<td></td>
			<th>School</th>
			<th>Requested</th>
			<th><% ($group->uncovered_entry_fee) ? "Entries Covered" : "Judges:" %> </th>
			<th>Accepted?</th>
			<td></td>
		</tr>

%	my $switch;

%	foreach my $req (@requests) {

%		my $day = $req->request_made->set_time_zone($league->timezone);

%		if ($req->covers > $req->accepted) { 
		 	<tr <% ($switch++ % 2) ? "class=\"redrow\"" : "class=\"lirdrow\"" %>>
%		} else { 
		 	<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
%		}
	
			<td>
				<form action="hire_requests_save.mhtml" method="post"> 
				<input type="hidden" name="req_id" value="<% $req->id %>">
				<% $switch %>.
			</td>

			<td class="smaller">
				<a href="registration.mhtml?school_id=<% $req->school->id %>">
				<% $req->school->name %>
				</a>
			</td>
	
			<td class="smaller">
				<% &Tab::niceshortdt($day) %>
			</td>

			<td>
				<input 	type="text" name="covers" size="4"
					value="<% ($group->uncovered_entry_fee) ? $req->covers : $req->covers / $group->judge_per %>">
			</td>

			<td>
				<input 	type="text" name="accepted" size="4" 
					value="<% ($group->uncovered_entry_fee) ? $req->accepted : $req->accepted / $group->judge_per %>">
			</td>

			<td>
				<input type="submit" class="blue" value="Save Changes and Notify Coaches">
				</form>
			</td>

		</tr>

%	}

	</table>

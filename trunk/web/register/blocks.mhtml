<%args>
	$circuit
	$group_id
	$tourn
</%args>
<%init>

	my $group = Tab::JudgeGroup->retrieve($group_id);

</%init>

<table cellpadding="0" width="100%">
<tr>
	<td width="100%">
	<h3>Judge Strikes</h3>
	</td>
	<td>
		<form action="print_strike_sheet.mhtml" method="post">
		<input type="hidden" name="group_id" value="<% $group_id %>">
		<input type="submit" value="Print Strike Sheet">
		</form>
	</td>
</tr>

%	my $switch;

	<table cellpadding="4" cellspacing="1" width="100%">

%	foreach my $judge (sort {$a->code <=> $b->code} $group->struck) {

%			$switch++;

			<tr <% ($switch % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

			<td>
			<a href="<% $Tab::url_prefix %>/register/judge_edit.mhtml?judge_id=<% $judge->id %>">
			<% $judge->code %>: <%$judge->first." ".$judge->last %> </a></td>


%	my $not_first;
%	foreach my $strike ($judge->strikes) {

%	if ($not_first) {
		</tr>
		<tr <% ($switch % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
		<td></td>
%	}

%   if ($strike->type eq "event" ) {
    <th>Event:</th>
%   my $event = $strike->event;
    <td><% $event->name %></td>
%   }

%   if ($strike->type eq "elim" ) {
    <th>No prelims:</th>
%   my $elim = $strike->event;
    <td><% $elim->name %></td>
%   }

%   if ($strike->type eq "school" ) {
    <th>School:</th>
%   my $school = $strike->school;
    <td colspan="3"><% $school->name %></td>
%   }

%   if ($strike->type eq "region" ) {
    <th>Region:</th>
%   my $region = $strike->region;
    <td><% $region->name %></td>
%   }

%   if ($strike->type eq "diocese" ) {
    <th>Diocese:</th>
%   my $diocese = $strike->diocese;
    <td><% $diocese->name %></td>
%   }

%   if ($strike->type eq "entry" ) {
    
		<th>Cannot judge:</th>
%   my $entry = $strike->entry;
    	<td>
			<a href="<%$Tab::url_prefix%>/register/entry/edit.mhtml?entry_id=<% $entry->id %>"><%$entry->code %></a>
			</a>
		</td>
		<td>
			<% $entry->school->name %>
		</td>
		<td>
			<% $entry->team_name %>
		</td>
%   }

%   if ($strike->type eq "time" &! $strike->bin) {
    <th>Unavailable between:</th>
%   my $start_un = $strike->start;
%   my $end_un   = $strike->end;
%   $start_un->set_time_zone($tourn->tz);
%   $end_un->set_time_zone($tourn->tz);
    <td><% $start_un->month."/".$start_un->day." ".$start_un->hour_12.":".$start_un->strftime("%M")." ".$start_un->strftime("%p") %>
    and
    <% $end_un->month."/".$end_un->day." ".$end_un->hour_12.":".$end_un->strftime("%M")." ".$end_un->strftime("%p") %>
    </td>
%   }

%	if ($strike->bin) {
	<th>Time Block:</th>
	<td><% $strike->bin->name %></td>
%	}	

%	$not_first++;

%	} #end of foreach strike

	</tr>

%	} #end of foreach judge


</table>


<%args>
	$tourn
	$session
	$student_id 
	$debug => undef
</%args>
<%init>

	my $student = Tab::Student->retrieve($student_id);

    my $filename = "student-assign-".$student->id."-".$session->id;
    my $filepath = $Tab::file_root."/tmp/$filename";

	system "/bin/rm -rf $filepath.*";

	open (TEXOUT, ">>$filepath.tex");

	print TEXOUT <<"EOF";

\\documentclass[10pt]{report}
\\usepackage{fullpage}
\\usepackage{helvet}
\\usepackage{colortbl}
\\usepackage{nopageno}
\\usepackage{fancyhdr,lastpage}
\\renewcommand{\\familydefault}{\\sfdefault}
\\renewcommand{\\arraystretch}{1.75}

\\pagestyle{fancy}

\\fancyhf{} % clear all header and footer fields
\\fancyfoot[R]{\\footnotesize Page \\thepage\\ of \\pageref{LastPage}}
\\fancyfoot[L]{\\footnotesize Printed by the Tabroom.com free online tournament management system}

\\renewcommand{\\headrulewidth}{0pt}
\\renewcommand{\\footrulewidth}{0pt}

    
\\begin{document}

EOF

	$m->comp("/register/entry/print/card.mas", filename => $filename, student => $student, tourn => $tourn);

	$m->comp("/funclib/printout.mas", filename => $filename, tail => 1);

</%init>

<div id="content">

<p><% $filename %></p>

<%args>
	$id1    => undef
	$id2    => undef
</%args>
<%init>

	$m->abort unless $id1 && $id2;
	
	my $total;
		
</%init>

	<& menu.mas &>

	<h2> RPI Detail </h2>

	<div class="left huge">

	<& /funclib/tablesorter.mas, table => "WUDC" &>

	<table cellpadding="3" width="100%" id="WUDC" class="tablesorter">

		<thead>
			<tr class="dkgreen">
				<th class="smaller">Name</th>
				<th class="smaller">Tourn</th>
				<th class="smaller">Pct Finish</th>				
				<th class="smaller">Weight</th>								
				<th class="smaller">Points</th>												
			</tr>
		</thead>


		<tbody>
		
%		my $student = Tab::Student->retrieve($id1);
%		my %detail = $m->comp("/funclib/team_rating_detail.mas", student => $id1);			
		
%		foreach my $key (keys %detail) {
			<tr>
				<td><% $student->first." ".$student->last %></td>
				<td><% $detail{$key}{'tourn'} %></td>
				<td><% $detail{$key}{'pct'} %></td>
				<td><% sprintf( "%.2f\n", $detail{$key}{'weight'} ) %></td>								
				<td><% sprintf( "%.2f\n", ($detail{$key}{'weight'}*$detail{$key}{'pct'})) %></td>
%				$total +=  ($detail{$key}{'weight'}*$detail{$key}{'pct'});
			</tr>	
%		}

%		$student = Tab::Student->retrieve($id2);
%		%detail = $m->comp("/funclib/team_rating_detail.mas", student => $id2);			
		
%		foreach my $key (keys %detail) {
			<tr>
				<td><% $student->first." ".$student->last %></td>
				<td><% $detail{$key}{'tourn'} %></td>
				<td><% $detail{$key}{'pct'} %></td>
				<td><% sprintf( "%.2f\n", $detail{$key}{'weight'} ) %></td>								
				<td><% sprintf( "%.2f\n", ($detail{$key}{'weight'}*$detail{$key}{'pct'})) %></td>
%				$total +=  ($detail{$key}{'weight'}*$detail{$key}{'pct'});				
			</tr>	
%		}

			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td>Total:</td>								
				<td><% sprintf( "%.2f\n", $total) %></td>
			</tr>	
		
		</tbody>

		</table>
		
	</div>

<%args>
	$round_id
	$account
</%args>
<%init>
	
	my $round = Tab::Round->retrieve($round_id);

	unless ($round) { 
		$m->print("No round entered, try again");
		$m->abort;
	}

	my $tourn = $round->event->tourn if $round;

	my $switch;

	unless ($round->listed || $account->site_admin) { 
		$m->print("<p class=\"err\">This round has not been published.  Quit messing around</p>");
		$m->abort;
	}

</%init>

	<& sidebar.mas, tourn_id => $tourn->id, event_id => $round->event->id &>

	<div class="left huge">

        <h2>
            <% $tourn->name %>: <% $tourn->location %>  
        </h2>

        <& ../tourn_header.mas, tourn => $tourn &>


		<h3>
			Students Advancing to <% $round->event->name %> <% ($round->label) ? $round->label : "Round ".$round->name %>
		</h3>

		<h4>
			Round scheduled for <% &Tab::nicedt($round->timeslot->start->set_time_zone($tourn->tz)) %>
		</h4>

	<table cellpadding="5" cellspacing="1" width="100%">

% 		foreach my $entry (sort {$a->code <=> $b->code} $m->comp("/funclib/round_entries.mas", round => $round)) { 
	    
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<th>
					<% $entry->code %>
				</th>

				<td>
					<% $m->comp("/funclib/entry_students.mas", entry => $entry, name => 1) %>
				</td>

			</tr>

%		}

	</table>
	</div>

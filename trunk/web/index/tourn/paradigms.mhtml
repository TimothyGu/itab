<%args>
	$tourn_id
</%args>
<%init>

	my $tourn = Tab::Tourn->retrieve($tourn_id);

	unless ($tourn->setting("publish_paradigms")) { 
		$m->print("<p class=\"err\">The paradigms for this tournament have not been published</p>");
		$m->abort;
	}

	my @groups = $tourn->groups(ask_paradigm => 1);

	my $switch;

</%init>

	<br />

	<table width="100%" cellpadding="0" cellspacing="0">

		<tr>
			<td width="100%">
				<h2><% $tourn->name %> Judge Paradigms</h2>
			</td>
		
			<td>
				<form action="paradigms_prints.mhtml">
				<input type="hidden" name="tourn_id" value="<% $tourn->id %>">
				<input  type="submit" value="Printable Paradigms List">
				</form>
			</td>
			
		</tr>

	</table>

%	foreach my $group (sort {$a->name cmp $b->name} @groups) { 

		<h4><% $group->name %></h4>

		<table  class="paradigm" cellpadding="5" cellspacing="1" width="100%">

%		foreach my $judge (sort {$a->last cmp $b->last} $group->judges) { 

%			next unless $judge->paradigm;

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>	

			<td valign="top" width="20%">
				<b><% $judge->last.", ".$judge->first %></b>:
				<br><% ($judge->school->id) ? $judge->school->name : "Hired" %>
			</td>

			<td class="smaller">
				<p><% $judge->paradigm %></p>
			</td>

			</tr>

%		}

	</table>
%	}

</p>

</div>

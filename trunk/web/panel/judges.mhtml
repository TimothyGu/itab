<%args>
	$tourn
	$err => undef
	$group_id => undef;
</%args>
<%init>
	my @groups = $tourn->groups;
	my @timeslots = $tourn->timeslots;
	my $group;

	if ($group_id) { 
		$group = Tab::JudgeGroup->retrieve($group_id); 
	}

</%init>

<table cellpadding="6" width="100%" cellspacing="0">  

<tr>
<td valign="top">

<h3>Judge information</h3>

<table cellpadding="6" cellspacing="1" width="100%">

% my $switch;

% 	foreach my $group (@groups) { 

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

		<td>
			<% $group->name %>
		</td>

		<td align="center">
			<form action="judgechart_show.mhtml" method="post">
			<input type="hidden" value="<% $group->id %>" name="group_id">
			<input class="blue" type="submit" value="Show All"></td>
			</form>
		</td>

		<td align="center">
			<form action="judgechart_print.mhtml" method="post">
			<input type="hidden" value="<% $group->id %>" name="group_id">
			<input class="blue" type="submit" value="Print All"></td>
			</form>
		</td>

		</tr>

% 	}

<tr class="liblrow">

	<td>
		Pool Counts:
	</td>

	<td align="center">
		<form action="poolcount_show.mhtml" method="post">
		<input class="blue" type="submit" value="Show All"></td>
		</form>
	</td>

	<td align="center">
		<form action="poolcount_print.mhtml" method="post">
		<input class="blue" type="submit" value="Print All"></td>
		</form>
	</td>
</tr>

<tr>
	<td colspan="3">
	<h4>Manually assign judges by round</h4>
	</td>
</tr>

<tr>
	<td colspan="3" align="center">
		<form action="judges_manassign.mhtml" method="post">
		<input type="submit" value="         Assign judges manually         ">
		</form>
	</td>
</tr>

<!--
<tr>
	<td colspan="3" align="center">
		<form action="round_panelsizes.mhtml" method="post">
		<input type="submit" value="  Set the number of judges by round  ">
		</form>
	</td>
</tr>

-->

</table>

</td><td valign="top" width="50%">

	<h3>Auto-panel judges</h3>

	<table cellpadding="6" cellspacing="1" width="100%"> 

		<tr class="liblrow">

			<td class="smaller">
				<form action="judges.mhtml" method="post">
				Select judge group:
			</td>

			<td>
				<select name="group_id">

%	 				foreach my $gr (@groups) { 
						<option value="<% $gr->id %>" 
							<% ($gr->id == $group_id) ? 'selected' : '' %> ><% $gr->name %>
						</option> 
% 					}

				</select>
			</td>

			<td>
				<input class="blue" type="submit" value="Select">
				</form>
			</td>

		</tr>

	</table>

% if ($group_id) { 

	<form action="judges_panel.mas" method="post">
	<input type="hidden" name="group_id" value="<% $group->id %>">
	<table cellpadding="6" cellspacing="1" width="100%"> 
	<tr><td colspan="5"><h4>Parameters for paneling <% $group->name %></h4></td></tr>

% 	my $max_panels = $m->comp("/funclib/maximum_judges.mas", group_id => $group->id);
% 	my @judges = $group->judges(active => 1);

% 	my $switch;
	
	<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
	<td>Most panels happening at once:</td>
	<td><% $max_panels %></td>
	</tr>
	
	<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
	<td># of Judges available:</td>
	<td><% scalar @judges %></td>
	</tr>
	
	<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
	<td>Judges per panel:</td>
	<td><input type="text" name="num_judges" size="4" value="1"></td>
	</tr>
	
	<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
	<td>Clear old judge assignments:</td>
	<td><input type="checkbox" name="clear_old" value="1">Yes</td>
	</tr>
	
	<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
	<td>Panel rounds happening in:</td>
	<td>
	<select name="timeslot">
		<option value="prelims">All Prelims</option>
		<option value="all">All Existing</option>

% 		foreach my $timeslot (@timeslots) { 
			<option value="<% $timeslot->id %>"><% $timeslot->name %></option>
% 		}

	</select></td>
	</tr>
	
	<tr>
	<td></td>
	<td>
	<input class="blue" type="submit" value="Auto-panel Judges">
	</td>
	</tr>
	</form>
	
% }

</table>

</td>
</tr>
</table>


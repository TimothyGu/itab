<%args> 
	$league
	$tourn
	$pool_id
	$judge_group_id => undef
	$sort_by => "code"
</%args>
<%init>

	my $pool = Tab::Pool->retrieve($pool_id);

	my @judges;

	if ($league->region_based || $league->diocese_based) { 
		@judges = Tab::Judge->search_by_group_reg($judge_group_id) if $judge_group_id;
	} else { 
		@judges = Tab::Judge->search( judge_group => $judge_group_id, active => 1);
	}

	@judges = $pool->judges unless @judges;

</%init>


<table>
	<tr>
		<td width="100%">
			<h3>Judges in pool <% $pool->name %></h3>
		</td>

		<td>
			<form action="pool_judges_print.mhtml" method="post">
			<input type="hidden" name="pool_id" value="<% $pool->id %>">
			<input type="submit" value=" Print This Pool ">
			</form>
		</td>

		<td>
			<form action="poolcount_show.mhtml" method="post">
			<input type="submit" value=" Return to Pool List ">
			</form>
		</td>

	</tr>
</table>



<center>

<table cellpadding="6" cellspacing="1" width="95%">

%	my $switch;

%	foreach my $judge (sort {$a->$sort_by cmp $b->$sort_by} @judges) {

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

		<td>
		<a href="<% $Tab::url_prefix %>/register/judge_edit.mhtml?judge_id=<%$judge->id%>">
		<% ($judge->code) ? $judge->code : "Edit" %></a></td>

%		if ($league->diocese_based || $league->region_based) { 
			<td><% $judge->school->chapter->region($league)->code %></td>
%		}

		<td> <% ($judge->school) ? $judge->school->name : "HIRE" %></td>
		<td> <% $judge->first %></td>
		<td> <% $judge->last %></td>
		<td> <% $judge->judge_group->abbr %></td>

%	if ($tourn->method->judge_quality_system) { 
		<td>
%			foreach my $q (sort {$a->id <=> $b->id} $judge->quals) { $m->print($q->name) }
		</td>
%	}
		<td> <% ($judge->first_year) ? "FY" : "" %></td>

	</tr>

%	}

<tr>
	<td colspan="9" align="center">
		<input class="blue" type="submit" value="Save Judge Assignments">
	</td>
</tr>

</table>

</form>

<br style="clear:both"/>

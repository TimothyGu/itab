<%args>
	$tourn
	$account
	$timeslot_id => undef
	$event_id => undef
</%args>
<%init>

	my $timeslot = Tab::Timeslot->retrieve($timeslot_id) if $timeslot_id;
	my @panels = $timeslot->panels($event_id) if $timeslot_id;

	unless (@panels) {

		my $event = Tab::Event->retrieve($event_id) if $event_id;
		@panels = $event->panels if $event;
	}


	foreach my $panel (@panels) { 

		my $argstring = "room_id_".$panel->id;
		$panel->room($ARGS{$argstring}) if $ARGS{$argstring};
		$panel->update;

	}

	$m->redirect("$Tab::url_prefix/panel/rooms_manassign.mhtml?timeslot_id=$timeslot_id&event_id=$event_id");

</%init>

<%args>
	$tourn
	$account
	$timeslot_id
	$num_judges
	$event_id => undef
</%args>
<%init>

	my $timeslot = Tab::Timeslot->retrieve($timeslot_id);

	my @panels = $timeslot->panels($event_id);
	my @clean_panels = $m->comp("/panel/panels_rmjudges.mas", panels => \@panels );

	my $arrayref = $num_judges - 1;

	foreach my $panel (@panels) { 

		foreach my $num ( 0 .. $arrayref) {	

			my $argstring = "judge_id_".$panel->id."_".$num;
			my $judge_id = $ARGS{$argstring};
			$m->comp("/panel/panel_judgeadd.mas", 
				panel_id => $panel->id, 
				account => $account, 
				tourn => $tourn, 
				judge_id => $judge_id, 
				shut_up => "you bet your bippy"
			) if $judge_id;
		}
	}

	$m->redirect("$Tab::url_prefix/panel/judges_manassign.mhtml?timeslot_id=$timeslot_id&num_judges=$num_judges&event_id=$event_id");

</%init>

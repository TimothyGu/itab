<%args>
	$circuit
	$tourn
	$session
	$account
</%args>
<%init>

	my @timeslots = sort {$a->start->epoch <=> $b->start->epoch} $tourn->timeslots;
	my @events =  sort {$a->name cmp $b->name} $m->comp("/funclib/tourn_events.mas", tourn => $tourn);

</%init>


<h3>Set the number of judges auto-assigned by round</h3>

<p>These settings will override the number of judges you auto-panel into prelim
rounds.  If you put a "2" in the box below that individual round will get
2-judge panels even if you auto-panel for 1 judge.  Likewise, if you put a "2"
in the box below for a round, that round will get 2 panels even if you
auto-panel for 3 judges.  This feature is intended for use by tournaments who
have a surplus of judges and want to use them, but don't have so many judges
that they can two-panel the entire tournament</p>

<form action="round_panelsize_save.mhtml" method="post">

<table cellpadding="5" cellspacing="1" width="100%">

	<tr class="evenrow">

		<th>Event</th>

%		my $count;

%		foreach my $timeslot (@timeslots) { 
%			my $timeslot_start = $timeslot->start->set_time_zone($circuit->timezone);
			<td <% ($count++ % 2) ? "class=\"dkbluer\"" : ""%> style="font-weight: bold;" align="center">
			<% $timeslot_start->hour_12.":".$timeslot_start->strftime('%M') %></th>
%		}

	</tr>

%	my %timeslot_totals = ();

%	my $switch;

%	foreach my $event (@events) { 

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

			<th><% $event->abbr %></th>

%			my $count;

%			foreach my $timeslot (@timeslots) { 

%				if ($switch % 2) { 
					<td <% ($count++ % 2) ? "class=\"bluer\"" : "" %>>
%				} else { 
					<td <% ($count++ % 2) ? "class=\"dkbluer\"" : "" %>>
%				}

%				foreach my $round (Tab::Round->search( event => $event->id, timeslot => $timeslot->id ) ) { 
					<% ($round->label) ? $round->label : $round->name %>
					<input type="text" name="<% $round->id %>" size="2" value="">

%#					$timeslot_totals{$timeslot->id} += $round->number_judges;

%				}
				</td>

%			}

	</tr>

%	}

	<tr class="redrow">
		
		<th>TOTALS:</th>

%		foreach my $timeslot (@timeslots) { 

			<td align="center"><% $timeslot_totals{$timeslot->id} %></td>

%		}

	</tr>

	<tr>
		<td colspan="50" align="right">
		<input type="submit" value="     Save Round Judge-panel Sizes     ">
		</td>
	</tr>

</table>

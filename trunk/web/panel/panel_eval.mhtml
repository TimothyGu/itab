<%args>
	$league
	$tourn
	$err => undef
	$event_id
	$round_id => undef
	$submit => "Display"
</%args>
<%init>

	my $event = Tab::Event->retrieve($event_id);

	my @rounds = sort {$a->name cmp $b->name} $event->rounds unless $round_id;
	push (@rounds, Tab::Round->retrieve($round_id)) if $round_id;

</%init>

<h3>Metrics for <% $event->name %> </h3>


%	foreach my $round (@rounds) { 

<h4>Round <% ($round->label) ? $round->label : $round->name %></h4>

<table cellpadding="5">

<tr>
	<th>Panel</th>
	<th>Double-hits</th>
	<th>School hits</th>
%	if ($league->region_based || $league->diocese_based) {
	<th>Region hits</th>
%	}
</tr>

%	my $switch;

%	foreach my $panel (sort {$a->letter cmp $b->letter} $round->panels) { 
%	my $hits = $panel->hits_score;
%	my $schoolz = $panel->school_score;
%	my $regionz = $panel->region_score;
%	next unless ($hits || $schoolz || $regionz); 

%	$switch++;

	<tr <% ($switch % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
		<th><% $panel->letter %></td>
		<td align="center"><% ($hits) ? $hits : ""%></td>
		<td align="center"><% ($schoolz) ? $schoolz : "" %></td>
		<td align="center"><% (($league->region_based || $league->diocese_based) && $regionz) ? 
								$regionz : "" %></td>
	</tr>
%	}	#end of foreach panel
% 	}	#end of foreach round

<%args> 
	$tourn
	$event_id => undef
	$basis => undef
</%args>
<%init>
	my $event = Tab::Event->retrieve($event_id) if $event_id;
	my @events = $m->comp("/funclib/tourn_events.mas", tourn => $tourn);
	@events = sort {$a->name cmp $b->name} @events;

	my @tab_settings = Tab::Setting->search( tournament => $tourn->id, name => "tabbing");
	my $tabtype = $tab_settings[0]->value;
	my $order_path = $tabtype."/show_ordered_entries.mas";

	my @double_entries = Tab::Setting->search( tournament => $tourn->id, name => "natick_double_entry" );
	my $double_entry = $double_entries[0]->value if @double_entries;

</%init>

<h3>Show final results <% ($event) ? "in ".$event->name : '' %></h3>

% unless ($event_id) {

<h4> Choose an event:</h4>

<center>
<table cellpadding="3" width="80%">
<form action="show_event.mhtml" method="post">
<tr>
<td>Event:</td>
<td><select name="event_id">

% foreach my $ev (@events) { 
	<option value="<% $ev->id %>" 
	<% ($ev->id eq $event_id ) ? 'selected' : '' %> >
	<% $ev->name %>
	</option>
%}
	<% ($double_entry == 1) ? '<option value="double">Double Entry Award</option>' : "" %>

</select>
</td>
<td><input  type="submit" value="Select">
</td>
</form>
</tr>
</table>

</center>

% }

% if ($event_id) { 

<h4>Placement:</h4>

 <& $order_path, event_id => $event_id, tourn_id => $tourn->id &>

% }


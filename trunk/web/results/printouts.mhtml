<%args>
	$tourn
	$account
	$circuit
	$err => undef;
</%args>
<%init> 

	my @events = sort {$a->name cmp $b->name} $tourn->events; 
	my $switch;

</%init> 

	<h2>Results for <% $tourn->name %></h2>

	<table cellpadding="6" width="100%" border="0" cellspacing="0">

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

			<th>
				View Full Results:
				<form action="event_results.mhtml" method="post">
			</th>
			
			<td>
				<select name="event_id">
					<option value="">Select one:</option>

%					foreach my $ev (@events) { 
						<option value="<% $ev->id %>">
							<% $ev->name %>
						</option>
% 					} 

				</select>
			</td>

			<td>
				Basis:
			</td>
			
			<td>
				<select name="basis">

					<option value="prelim">
						Prelims
					</option>
					
					<option value="elim" >
						Elims
					</option>
					
					<option value="final">
						Finals
					</option>
				</select>
				
			</td> 
			
			<td>
				<input  type="submit" value="   View Event  ">
				</form>
			</td>
			
		</tr>

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

   			<th>
				Print Full Results:
				<form action="print_event_results.mhtml" method="post">
			</th>
			
			<td>
				<select name="event_id">

					<option value="">
						All Events
					</option>

%					foreach my $event (sort {$a->name cmp $b->name} $tourn->events) { 
%						next if $event->type eq "debate";
						<option value="<% $event->id %>">
							<% $event->name %>
						</option>
% 					} 
				</select>
				
			</td>
			
			<td>
				Basis:
			</td>

			<td>
				<select name="basis">

					<option value="prelim">
						Prelims
					</option>

					<option value="prelim_only">
						Prelims by Code
					</option>

					<option value="elim" >
						Elims
					</option>

					<option value="elim_only" >
						Elims Only
					</option>

					<option value="final">
						Finals
					</option>
				</select>

			</td> 
			
			<td>
				<input  type="submit" value="   Print Event  ">
				</form>
			</td>
			
		</tr> 
		
		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

    		<th>
				Print Awards:
				<form action="awards_ceremony.mhtml" method="post">
			</th>

			<td>
				<select name="event_id">

					<option value="">
						All Events
					</option>

%					foreach my $event (sort {$a->name cmp $b->name} $tourn->events( type => "speech" )) { 
						<option value="<% $event->id %>">
							<% $event->name %>
						</option>
% 					}

				</select>
			</td>

			<td>
				Through:
			</td>
		
			<td>
				<select name="round_id">

					<option value="">
						All Times
					</option>

%					foreach my $timeslot (sort {$a->start->epoch <=> $b->start->epoch} $tourn->timeslots ) { 
					
						<option value="<% $timeslot->id %>">
							<% $timeslot->name %>
						</option>
% 					}

				</select>
			</td>

	 		<td>
			   	<input  type="submit" value="Print Awards">
				</form>
			</td>
		</tr>

		<tr>	
			<td colspan="6">
				<hr>
			</td>
		</tr>

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
		
			<th>
				View School Results:
				<form action="school_report_view.mhtml" method="post">
			</td>

			<td colspan="3">

				<select name="school_id">

% 				foreach my $school (sort {$a->name cmp $b->name} $tourn->schools) { 
					<option value="<% $school->id %>">	
						<% $school->name %>
					</option>
% 				}
				</select>
			</td>

			<td>
				<input  type="submit" value="View School">
				</form>
			</td>

		</tr>


		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

    		<th>
				<form action="school_report_print.mhtml" method="post">
				Print School Results:
			</th> 
			
			<td colspan="3">

				<select name="school_id">

					<option value="">
						All Schools
					</option>

% 					foreach my $school (sort {$a->name cmp $b->name} $tourn->schools) {
        				<option value="<% $school->id %>">
							<% $school->name %>
						</option>
% 					}

			    </select>
			</td> 
			
			<td>
				<input  type="submit" value="Print School">
				</form>
			</td>
			
		</tr> 
		
		<tr>
			<td colspan="6">
				<hr />
			</td>
		</tr>

% 		if ($circuit->diocese_based) { 

			<tr <% ($switch % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<th>
					<form action="ncfl/school_sweep_award.mhtml" method="post">
					School Sweepstakes:
				</th>

				<td colspan="3">
					For Masterson, please select the Extemp event:
				</td>
			
				<td>
					<select name="extemp">
%						foreach my $event ($tourn->events) {
							<option value="<% $event->id %>" <% ($event->abbr eq "EX") ? "selected" : "" %>>
								<% $event->name %>
							</option>
%						}
					</select>
				</td>

			</tr>

			<tr <% ($switch % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<th>
				</th>

				<td colspan="3">
					For Masterson, please select the Oratory event:
				</td>
			
				<td>
					<select name="oratory">
%						foreach my $event ($tourn->events) {
							<option value="<% $event->id %>" <% ($event->abbr eq "OO") ? "selected" : "" %>>
								<% $event->name %>
							</option>
%						}
					</select>
				</td>

			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<td>
				</td>

				<td colspan="3"><select name="view">
					<option value="speech">Speech Events Only (Founders)</option>
					<option value="debate">Debate Events Only (Wright)</option>
					<option value="overall">Overall Sweeps (Masterson)</option>
				</td>

				<td>
					<input  type="submit" name="type" value="View">
					<input  type="submit" name="type" value="Print">
					<input  type="submit" name="type" value="CSV">
					</form>
				</td>
			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<th>
					Diocesan Sweepstakes:
					<form action="ncfl/diocese_sweep_award.mhtml" method="post">
				</th>

				<td colspan="3">
					<select name="cooke">
						<option value="">View/Print Only</option>
%							if ($account->site_admin > 0) { 
								<option value="do">Save Cooke Award Points</option>
								<option value="undo">Unsave Cooke Award Points</option>
%							}
					</select>
				</td>

				<td>
					<input  type="submit" name="type" value="View">
					<input  type="submit" name="type" value="Print">
					<input  type="submit" name="type" value="CSV">
					</form>
				</td>
			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<th>
					<form action="ncfl/cooke_points.mhtml" method="post">
					Existing Cooke Points:
				</th>

				<td colspan="3"></td>

				<td>
					<input  type="submit" name="type" value="View">
					</form>
				</td>

			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<th>
					<form action="ncfl/sweeps_reports.mhtml" method="post">
					Individual Sweep reports:
				</th>
	
				<td colspan="3">
					<select name="event_id">

						<option value="">
							All Events:
						</option>

%						foreach my $ev (@events) { 
							<option value="<% $ev->id %>">
								<% $ev->name %>
							</option>
% 						} 
					</select>
				</td>

				<td>
					<input  type="submit" name="type" value="Download CSV">
					</form>
				</td>

			</tr>
	
%		} else { 

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
	
				<th>
					Sweepstakes Report:
					<form action="overall_report.mhtml" method="post">
				</th>

				<td colspan="3">

					<select name="view">

						<option value="view">
							View
						</option>

						<option value="print">
							Print
						</option>

						<option value="view_novii">
							View Novices
						</option>

						<option value="print_novii">
							Print Novices
						</option>
					</select>
					
				</td>

				<td>
					<input  type="submit" value="Sweepstakes">
					</form>
				</td>
			</tr>
	
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<th>
					Sweepstakes by Student:
					<form action="individual_sweeps.mhtml" method="post">
				</th>

				<td colspan="3">
				</td>

				<td>
					<input  type="submit" value="Sweepstakes">
					</form>
				</td>

			</tr>

% 		} 
	
	</table>
	

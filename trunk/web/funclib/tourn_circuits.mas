<%args>
	$tourn
	$print_names => undef
	$print_abbr => undef
</%args>
<%perl>

	return unless $tourn;

	Tab::Circuit->set_sql( by_tourn => "
       	select distinct circuit.* 
       	from circuit, tourn_circuit
       	where circuit.id = tourn_circuit.circuit
       	and tourn_circuit.tourn = ? 
       	order by circuit.name");

	if ($print_names) { 

		my $name;

		foreach (Tab::Circuit->search_by_tourn($tourn->id)) { 
			$name .= " & " if $name;
			$name .= $_->name
		}

		return $name;

	} elsif ($print_abbr) { 

		my $abbr;

		foreach (Tab::Circuit->search_by_tourn($tourn->id)) { 
			$abbr .= " & " if $abbr;
			$abbr .= $_->abbr
		}

		return $abbr;

	} else { 

	    return Tab::Circuit->search_by_tourn($tourn->id);

	}

</%perl>


<%args>
	$pool
</%args>
<%init>

	return unless $pool;

	Tab::Judge->set_sql( by_pool => "
		select distinct judge.*, group_concat(distinct rating.id, rating_tier.name) as avg
		from judge, pool_judge, rating, rating_tier
		where pool_judge.pool = ?
		and pool_judge.judge = judge.id
		and judge.active = 1
		and judge.id = rating.judge
		and rating.rating_tier = rating_tier.id
		group by judge.id
		order by judge.code, judge.last");

	return Tab::Judge->search_by_pool($pool->id);


</%init>

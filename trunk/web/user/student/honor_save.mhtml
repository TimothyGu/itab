<%args>
	$student_id
	$honor => undef
	$honor_site => undef
</%args>
<%init>

	my $student = Tab::Student->retrieve($student_id);

	unless ($student && $honor && $honor_site) { 
		my $err = "You must enter both an honor and the tournament it came from to proceed";
		$m->redirect("/user/student/index.mhtml?student_id=$student_id&err=$err");
	}

	Tab::Result->create({
		student => $student->id,
		honor => $honor,
		honor_site => $honor_site
	});

	my $msg = "Honor saved";
	$m->redirect("/user/student/index.mhtml?student_id=$student_id&msg=$msg");

</%init>

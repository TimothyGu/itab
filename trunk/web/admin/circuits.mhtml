<%args>
	$account
</%args>
<%init>

	my @circuits = Tab::Circuit->retrieve_all;
	@circuits = sort {$a->name cmp $b->name} @circuits;

</%init>

	<div class="left huge">

		<h2>Circuits at <% $Tab::url_prefix %></h2>

		<table cellpadding="5" cellspacing="1" width="100%">

			<tr class="liblrow">

				<th class="smaller">
					Circuit
				</th>

				<th class="smaller">
					Abbr.
				</th>

				<th class="smaller">
					Locale
				</th>

				<th class="smaller">
					Active
				</th>

				<th class="smaller">
					Tourneys
				</th>
				
				<th>
				</th>

			</tr>


%			my $switch; 

%			foreach my $circuit (@circuits) { 
	
				<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
	
					<th class="smaller"> 
						<a href="/user/circuit/circuit_edit.mhtml?circuit_id=<% $circuit->id %>" class="white block">
						<% $circuit->name %> 
						</a>
					</th>
	
					<td class="smaller centeralign">
						<% $circuit->abbr %> 
					</td>

					<td class="smaller centeralign">
						<% $circuit->state %> 
					</td>
	
					<td class="smaller centeralign">
						<a href="circuit_activate.mhtml?circuit_id=<% $circuit->id %>" 
						class="<% ($circuit->active) ? "dkgreen" : "dkred" %> block">
						<% ($circuit->active) ? "Yes" : "No" %>
						</a>
					</td>

					<td class="smaller centeralign">
						<% scalar ($m->comp("/funclib/circuit_tourns.mas", circuit => $circuit)) %>
					</td>

					<td class="smaller centeralign">
						<a href="/user/circuit/circuit_edit.mhtml?circuit_id=<% $circuit->id %>" class="dkgreen block">
							Edit
						</a>
					</td>

				</tr>

%			}

		</table>

	</div>

	<div class="right small">

        <& /user/menu.mas, account => $account &>

	</div>

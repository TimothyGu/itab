<%args> 
	$account
	$story_id
	$certain => undef
</%args> 
<%init>

my $story = Tab::News->retrieve($story_id);

if ($certain eq "I am certain" ) { 

	system "/bin/rm -rf $Tab::file_root/files/sitewide/articles/". $story->id;

	$story->delete;

	my $err = "News ". $story->title ." has been deleted ";

	$m->redirect("$Tab::url_prefix/admin/news_edit.mhtml?err=$err");

}

</%init>

	<&  "/funclib/warning.mas", account => $account &>

<h3></h3>
<p></p>
<br><br>
<br><br>
<center>

	<P><B>You are about to permanently delete the story <% $story->title %>

% 		if ($story->file) { 
			, along with the attached file <% $story->file %>.
% 		}

	</b></p>

	<p>This cannot be undone.  You can only get it back by typing in the story
	all over again.  </p>

	<p>Don't say I didn't warn you.</b></p>

% 	if ($certain) {

		<p class="err">
			You did not type "I am certain", exactly like that.  Try again:
		</p>
% 	}

<br><br>
<p>To proceed, type "I am certain" in the box below:</p>
<br><br>

	<form action="story_rm.mhtml" method="post">
	<input type="hidden" value="<% $story_id %>" name="story_id">

	<p align="center">
		<input type="text" name="certain" size="20">
	</p>

	<p align="center">
		<input  type="submit" value="Delete News">
	</p>

	</form>

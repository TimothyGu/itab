<%args> 
	$account
	$circuit_id => undef
	$err => undef
</%args>
<%init> 

	my $circuit = Tab::Circuit->retrieve($circuit_id) if $circuit_id;
	my $switch;

</%init>

	<div class="left huge">

		<table cellpadding="0" cellspacing="0" width="100%">

   	    	<tr>

            	<td width="100%">
					<h2><% ($circuit) ? $circuit->name : "Create Circuit" %></h2> 
            	</td>

            	<td>
            	    <form action="circuits.mhtml" method="post">
            	    <input type="submit" class="grey" value="  Back ">
            	    </form>
				</td>

			</tr>

   	 	</table>

		<table cellpadding="5" width="100%" cellspacing="0">


			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
				<td>
					Full Name:
				</td>
			
				<td align="right" colspan="2">
					<form action="circuit_save.mhtml" method="post"> 
					<input type="hidden" name="circuit_id" value="<% $circuit_id %>">
					<input type="text" size="25" name="name" value="<% ($circuit) ? $circuit->name : "" %>">
				</td>

			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
				<td>Short Name:</td>
				<td align="right" colspan="2"><input type="text" size="25" name="short_name" value="<% ($circuit) ? $circuit->short_name : "" %>"></td>
			</tr>
			
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
				<td>State/Locale:</td>
				<td align="right" colspan="2"><input type="text" size="25" name="state" value="<% ($circuit) ? $circuit->state : "" %>"></td>
			</tr>
			
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
				<td>Website URL:</td>
				<td align="right" colspan="2"><input type="text" size="25" name="url" value="<% ($circuit) ? $circuit->url : "" %>"></td>
			</tr>
			
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
				<td>Timezone:</td>
				<td align="right" colspan="2"><select name="timezone">
					<option value="">----Select One------</option>
					<option value="America/New_York"
						<% ($circuit) ? ($circuit->timezone eq "America/New_York") ? "selected" : "" : ""%>
						>Eastern</option>
					<option value="America/Indianapolis"
						<% ($circuit) ? ($circuit->timezone eq "America/Indianapolis") ? "selected" : "" : "" %>
						>Indiana</option>
					<option value="America/Chicago"
						<% ($circuit) ? ($circuit->timezone eq "America/Chicago") ? "selected" : "" : "" %>
						>Central</option>
					<option value="America/Denver"
						<% ($circuit) ? ($circuit->timezone eq "America/Denver") ? "selected" : "" : "" %>
						>Mountain</option>
					<option value="America/Phoenix"
						<% ($circuit) ? ($circuit->timezone eq "America/Phoenix") ? "selected" : "" : "" %>
						>Arizona</option>
					<option value="America/Los_Angeles"
						<% ($circuit) ? ($circuit->timezone eq "America/Los_Angeles") ? "selected" : "" : "" %>
						>Pacific</option>
					</select>
				</td>
			</tr>
			
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			
				<td colspan="2">Active Circuit:</td>
			
				<td align="right">
					<input 	type="radio" name="active" value="1" <% ($circuit) ? ($circuit->active) ? "checked" : "" : "" %> > 
					Yes
			
					<input type="radio" name="active" value="" <% ($circuit) ? ($circuit->active) ? "" : "checked" : "" %> > 
					No
				</td>
			</tr>
			
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			
				<td colspan="2">Host Site Here:</td>
			
				<td align="right">
					<input 	type="radio" name="hosted_site" value="1" <% ($circuit) ? ($circuit->hosted_site) ? "checked" : "" : "" %> > 
					Yes
			
					<input type="radio" name="hosted_site" value="" <% ($circuit) ? ($circuit->hosted_site) ? "" : "checked" : "" %> > 
					No
				</td>
			</tr>
			
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			
				<td colspan="2">Full Memberships:</td>
				
				<td align="right"> 
					<input type="radio" name="full_members" value="1" <% ($circuit) ? ($circuit->full_members) ? "checked" : "" : "" %> >
					Yes
			
					<input type="radio" name="full_members" value="" <% ($circuit) ? ($circuit->full_members) ? "" : "checked" : "" %> >
					No
				</td>
			</tr>
			
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			
				<td colspan="2">Open to non-members</td>
				
				<td align="right"> 
					<input type="radio" name="tourn_only" value="1" <% ($circuit) ? ($circuit->tourn_only) ? "checked" : "" : "" %> >
					Yes
			
					<input type="radio" name="tourn_only" value="" <% ($circuit) ? ($circuit->tourn_only) ? "" : "checked" : "" %> >
					No
				</td>
			</tr>
			
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			
				<td colspan="2">Track Bids:</td>
				
				<td align="right">
					<input type="radio" name="track_bids" value="1" <% ($circuit) ? ($circuit->track_bids) ? "checked" : "" : "" %> >
					Yes
			
					<input type="radio" name="track_bids" value="" <% ($circuit) ? ($circuit->track_bids) ? "" : "checked" : "" %> >
					No
				</td>
			</tr>
			
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			
				<td colspan="2">Public Emails:</td>
				
				<td align="right">
					<input type="radio" name="public_email" value="1" <% ($circuit) ? ($circuit->public_email) ? "checked" : "" : "" %> >
					Yes
			
					<input type="radio" name="public_email" value="" <% ($circuit) ? ($circuit->public_email) ? "" : "checked" : "" %> >
					No
				</td>
			</tr>
			
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			
				<td colspan="2">APDA Seedings:</td>
				
				<td align="right">
					<input type="radio" name="apda_seeds" value="1" <% ($circuit) ? ($circuit->apda_seeds) ? "checked" : "" : "" %> >
					Yes
			
					<input type="radio" name="apda_seeds" value="" <% ($circuit) ? ($circuit->apda_seeds) ? "" : "checked" : "" %> >
					No
				</td>
			</tr>
			
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			
				<td colspan="2">Use Regions:</td>
				
				<td align="right">
					<input type="radio" name="region_based" value="1" <% ($circuit) ? ($circuit->region_based) ? "checked" : "" : "" %> >
					Yes
			
					<input type="radio" name="region_based" value="" <% ($circuit) ? ($circuit->region_based) ? "" : "checked" : "" %> >
					No
				</td>
			</tr>
			
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			
				<td colspan="2">Use Dioceses (NCFL):</td>
				
				<td align="right">
					<input type="radio" name="diocese_based" value="1" <% ($circuit) ? ($circuit->diocese_based) ? "checked" : "" : "" %> >
					Yes
			
					<input type="radio" name="diocese_based" value="" <% ($circuit) ? ($circuit->diocese_based) ? "" : "checked" : "" %> >
					No
				</td>
			</tr>
			
			<tr class="liblrow">
				<td class="center" colspan="3">
					<input class="blue" type="submit" value="Save Circuit Info">
					</form>
				</td>
			</tr>
			
		</table>

	</div>

	<div class="right small">

% 	if ($circuit_id) { 

%		undef $switch;

		<h3>Circuit Administrators:</h3>

		<table cellpadding="2" width="100%" cellspacing="1">

% 			foreach my $admin (sort {$a->last cmp $b->last} $circuit->admins) { 

				<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

					<td class="smaller">
						<% $admin->first." ".$admin->last %>
					</td>

					<td class="smaller">
						<% $admin->email %>
					</td>

					<td class="center">
						(<a href="<% $Tab::url_prefix %>/circuit/admin_rm.mhtml?admin_id=<% $admin->id%>&circuit_id=<% $circuit_id %>">Del</a>)
					</td>

				</tr>

% 			} # end of foreach my admin


			<tr class="liblrow">
				<td colspan="2">
					<form action="admin_add.mhtml" method="post">
					<input type="hidden" name="circuit_id" value="<% $circuit_id %>">
					<input type="text" size="25" name="email" value="Add New (Email)" onMouseOver='value=""'>
				</td>

				<td>
					<input class="blue" type="submit" value="Add">
					</form>
				</td>

			</tr>

		</table>
% 	} # end of if circuit_id 

	</div>





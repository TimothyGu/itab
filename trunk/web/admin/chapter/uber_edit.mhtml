<%args>
	$circuit
	$account
	$uber_id => undef
	$err => undef;
	$chapter_id => undef;
	$from => undef;
</%args>
<%init>

	my $uber = Tab::Uber->retrieve($uber_id) if $uber_id;

	$chapter_id = $uber->chapter->id if $uber;

</%init>

<div class="left huge">

	<table width="100%">

		<tr>
			<td width="100%">

%				if ($uber) {
					<h3>Edit <%$uber->first." ".$uber->last %></h3>
% 				} else { 
					<h3>Create new Judge</h3>
% 				}

			</td>

			<td>
				<form action="uber_roster.mhtml" method="post">
				<input type="hidden" name="chapter_id" value="<% $chapter_id %>">
				<input type="submit" class="grey" value=" Back to Judge Roster ">
				</form>
			</td>

		</tr>

	</table>

	<table cellpadding="5" cellspacing="1" width="100%" >

		<form action="uber_save.mhtml" method="post">
		<input type="hidden" name="uber_id" value="<% ($uber) ? $uber->id : "" %>">
		<input type="hidden" name="chapter_id" value="<% $chapter_id %>">
		<input type="hidden" name="from" value="<% $from %>">

%		my $switch;

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			<td>First:</td>
			<td><input type="text" name="first" size="30" value="<% ($uber) ? $uber->first : "" %>"></td>
		</tr>

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			<td>Last:</td>
			<td><input type="text" name="last" size="30" value="<% ($uber) ? $uber->last : ""%>"></td>
		</tr>

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			<td>Cell Phone #:</td>
			<td><input type="text" name="cell" size="15" value="<% ($uber) ? $uber->cell : ""%>"></td>
		</tr>

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			<td>Started Judging in (approx year):</td>
			<td><input type="text" name="started" size="6" value="<% ($uber) ?   $uber->started : ""%>"></td>
		</tr>

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			<td>Inactive?:</td>
			<td><input type="checkbox" name="retired" value="1" <% ($uber) ?  ($uber->retired) ? 'checked' : '': "" %> ></td> 
		</tr>

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			<td>Gender:</td>
			<td>
				<input type="radio" name="gender" value="M" <% ($uber) ? ($uber->gender eq "M") ? "checked" : "" : "" %>> Male
				<input type="radio" name="gender" value="F" <% ($uber) ? ($uber->gender eq "F" ) ? "checked" : "" : "" %>> Female
			</td>
		</tr>

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			<td>Notes:</td>
			<td>
				<input type="text" size="30" name="notes" value="<% ($uber) ? $uber->notes : "" %>">
			</td>
		</tr>

		<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
			<td colspan="2">Paradigm (link or text):</td>
		</tr>

		<tr>
			<td colspan="2" align="center">
				<textarea name="paradigm" rows="5" cols="59"><% ($uber) ? $uber->paradigm : "" %></textarea>
			</td>
		</tr>

		<tr class="liblrow">
			<td colspan="2" align="right">
				<input class="blue" type="submit" value="  Save Judge  ">
				</form>
			</td>
		</tr>

	</table>

</div>

<div id="rightsmall">

%	if ($uber) {

%		foreach my $judge ($uber->judges) { 

			<a class="blue block"><% $judge->judge_group->abbr %> at <% $judge->judge_group->tournament->name %></a>

%		}	

%	}

%		undef $switch;

		<table width="100%" cellpadding="5" cellspacing="1">

			<tr>
				<td colspan="4">
					<h3>Add new judge</h3>
					<form action="uber_save.mhtml" method="post"> 
					<input type="hidden" name="chapter_id" value="<% $chapter_id %>">
				</td>

			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
				<td>
					First:
				</td>

				<td colspan="3">
					<input type="text" name="first" size="15">
				</td>

			</tr>
	
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<td>
					Last:
				</td>

				<td colspan="3">
					<input type="text" name="last" size="15">
				</td>

			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
				<td>
					Started Judging:
				</td>

				<td colspan="3">
					<input type="text" name="started" size="10" value="Enter a year" onfocus='value=""'>
				</td>
			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>
				<td>
					Gender:
				</td>

				<td>
					<input type="radio" name="gender" value="F">F
				</td>

				<td>
					<input type="radio" name="gender" value="M">M
				</td>
			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<td>
					Notes:
				</td>

				<td colspan="3">
					<input type="text" name="notes" size="15">
				</td>

			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\"" %>>

				<td>
					Cell Phone:
				</td>

				<td colspan="3">
					<input type="text" name="cell" size="15">
				</td>
			</tr>

			</tr>
			<tr class="liblrow">
				<td align="right" colspan="4">
				<input class="blue" type="submit" value="   Save Judge   ">
				</form>
				</td>
			</tr>

		</table>

	</div>

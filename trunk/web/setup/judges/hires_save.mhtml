<%args>
	$league
	$tourn
	$group_id
	$track_judge_hires => undef
	$hired_fee => undef
	$hired_pool => undef
	$missing_judge_fee => undef
	$uncovered_entry_fee => undef
</%args>
<%init>

	my $err;
	my $msg;

	my $group = Tab::JudgeGroup->retrieve($group_id);
	#Throw an error if both uncovered entry method and missing judge method are set

	if ($uncovered_entry_fee && $hired_fee) { 

		$err = "You can only use one Hiring Method for judges, not both.";
		$m->redirect("$Tab::url_prefix/setup/judges/hires.mhtml?group_id=$group_id&err=$err");

	}

	$group->track_judge_hires($track_judge_hires);
	$group->hired_pool($hired_pool);
	$group->hired_fee($hired_fee);
	$group->missing_judge_fee($missing_judge_fee);
	$group->uncovered_entry_fee($uncovered_entry_fee);
	$group->update;

	$msg = "Judge group information saved";

	$m->redirect("$Tab::url_prefix/setup/judges/hires.mhtml?group_id=$group_id&err=$err&msg=$msg");

</%init>

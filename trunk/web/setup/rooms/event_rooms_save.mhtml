<%args>
	$room_id
	$event_id
	$type
	$debug => 1
</%args>
<%init>

	&Tab::log("I am called to save the rooms!") if $debug;

	my @room_pools = Tab::RoomPool->search( event => $event_id, room => $room_id );

	foreach my $pool (@room_pools) { 
		$pool->delete;
	}

	unless ($type eq "a") { 
	
		my $reserved = 1 if $type eq "r";

		my $pool = Tab::RoomPool->create({
			room => $room_id,
			event => $event_id,
			reserved => $reserved
		});

	}

	return;

</%init>

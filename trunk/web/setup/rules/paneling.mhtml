<%args>
	$account
	$tourn
	$err => undef
</%args>
<%init>

	my $switch;

</%init>

    <& sidebar.mas, tourn => $tourn, chosen => "paneling" &>

    <div class="left huge">

		<h2>Paneling Settings</h2>

		<table cellpadding="7" cellspacing="1" width="100%">
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="center">
					<form action="paneling_save.mhtml" method="post">
					Speech panel sizes
				</td>
		
				<td colspan="3" align="right">

					<div style="float: left; padding-right: 10px;" >
						Min
						<input type="text" size="5" name="min_panel_size" value="<% $tourn->setting("min_panel_size") %>">
					</div>

					<div style="float: left; padding-right: 10px;" >
						Default
						<input type="text" size="5" name="default_panel_size" value="<% $tourn->setting("default_panel_size") %>">
					</div>

					<div style="float: left;">
						Max
						<input type="text" size="5" name="max_panel_size" value="<% $tourn->setting("max_panel_size") %>">
					</div>
				
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="center">
					Congress chamber sizes
				</td>
		
				<td colspan="3" align="right">

					<div style="float: left; padding-right: 10px;" >
						Min
						<input type="text" size="5" name="min_chamber_size" value="<% $tourn->setting("min_chamber_size") %>">
					</div>

					<div style="float: left; padding-right: 10px;" >
						Default
						<input type="text" size="5" name="default_chamber_size" value="<% $tourn->setting("default_chamber_size") %>">
					</div>
				
					<div style="float: left;">
						Max
						<input type="text" size="5" name="max_chamber_size" value="<% $tourn->setting("max_chamber_size") %>">
					</div>

				</td>

			</tr>

		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td>
					Elim round paneling method
				</td>
				
				<td class="rightalign">

					<select name="elim_method">
						<option value="snake" 
							<% ($tourn->setting("elim_method") eq "snake") ? "selected" : "" %>>
							Strictly snake bracket
						</option>
		
						<option value="snake_school" 
							<% ($tourn->setting("elim_method") eq "snake_school") ? "selected" : "" %>>
							Snake adjusted by similar seeds
						</option>

						<option value="snake_school_rank" 
							<% ($tourn->setting("elim_method") eq "snake_school_rank") ? "selected" : "" %>>
							Snake adjusted by same 1st tiebreak
						</option>
			
						<option value="snake_school_force" 
							<% ($tourn->setting("elim_method") eq "snake_school_force") ? "selected" : "" %>>
							Snake and force-adjust for schools
						</option>
		
						<option value="cfl"
							<% ($tourn->setting("elim_method") eq "cfl") ?  "selected" : "" %>>
							NCFL Nationals
						</option>
					</select>

				</td>

			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >

				<td>
					Adjust for schools among ties in:
				</td>
				
				<td class="rightalign">
					<select name="elim_method_basis">
		
						<option value="">
							None
						</option>
		
						<option value="seed" 
							<% ($tourn->setting("elim_method_basis") eq "seed") ? "selected" : "" %>>
							Seed
						</option>
		
						<option value="prelim_cume" 
							<% ($tourn->setting("elim_method_basis") eq "prelim_cume") ? "selected" : "" %>>
							Prelim Cume
						</option>
		
						<option value="overall_cume" 
							<% ($tourn->setting("elim_method_basis") eq "overall_cume") ? "selected" : "" %>>
							Overall Cume
						</option>
					</select>

				</td>
			</tr>

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >

				<td>	
					Limit a schools' IE entries to this percent of panels<br />
					<span class="explain">
						(Keeps rooms clear to use a large school's judges)
					</span>
				</td>

				<td class="rightalign">
					<input name="school_percent_limit" type="number" min="0" max="100" size="5" value="<% $tourn->setting("school_percent_limit")%>">
				</td>

			</tr>
				
		
		</table>
		
		<h4>Judges</h4>

		<table cellpadding="7" cellspacing="1" width="100%">
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top" >
					<label for="no_back_to_back">
					Prevent judges from getting back to back rounds
					</label>
				</td>
		
				<td valign="top">
					<input type="checkbox" id="no_back_to_back" name="no_back_to_back"  value="1"
					<% ($tourn->setting("no_back_to_back") == 1) ? "checked" : "" %> >
				</td>
		
			</tr>
		
%			if ($tourn->setting("ncfl")) { 
		
				<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
					<td valign="top" >
						<label for="disable_region_strikes">
							Disable diocese-based strikes
						</label>
					</td>
		
					<td valign="top">
						<input type="checkbox" id="disable_region_strikes" name="disable_region_strikes"  value="1"
						<% ($tourn->setting("disable_region_strikes") == 1) ? "checked" : "" %> >
					</td>
		
				</tr>
		
%			}
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top" >
					<label for="judge_event_twice">
					Judges may see the same event twice
					</label>
				</td>
		
				<td valign="top">
					<input type="checkbox" id="judge_event_twice" name="judge_event_twice"  value="1"
					<% ($tourn->setting("judge_event_twice") == 1) ? "checked" : "" %> >
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top" >
					Allow judges from the same school on a panel
				</td>
		
				<td valign="top"  align="left">
					<input type="checkbox" name="allow_school_panels"  value="1"
					<% ($tourn->setting("allow_school_panels") == 1) ? "checked" : "" %> >
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >

				<td valign="top" >
					<label for="allow_neutral_judges">
					Allow judges marked "neutral" to judge their own students
					</label>
				</td>
			
				<td valign="top"  align="left">
					<input type="checkbox" id="allow_neutral_judges" name="allow_neutral_judges"  value="1"
					<% ($tourn->setting("allow_neutral_judges")) ? "checked" : "" %> >
				</td>
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >

				<td valign="top" >
					<label for="allow_judge_own">
					All judges may judge their own students
					<label>
				</td>

				<td valign="top"  align="left">
					<input type="checkbox" id="allow_judge_own" name="allow_judge_own"  value="1"
					<% ($tourn->setting("allow_judge_own") == 1) ? "checked" : "" %> >
				</td>

			</tr>
		
			<tr class="liblrow">
			
				<td align="right" colspan="2">
					<input  type="submit" name="from" value="Save Settings" style="margin-right: 20px;">
					</form>
				</td>
			
			</tr>
			
		</table>

	</div>

<%args>
	$account
	$circuit
	$tourn
	$err => undef
</%args>
<%init>

	my $method = $tourn->method if $tourn->method;

	unless ($method && $method->id) { 

		$method = Tab::Method->create({
			is_standard => 0
		});

		$tourn->method($method->id);
		$tourn->update;
	}

	my $switch;

</%init>

	<& sidebar.mas, circuit => $circuit, chosen => "registration" &>

	<div class="left huge">
	
		<h2>Registration Settings</h2>

		<table cellpadding="5" cellspacing="1" width="95%" cellspacing="0" border="0">

			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >

				<td  >
					<form action="registration_save.mhtml" method="post">
					<input type="hidden" name="method_id" value="<% ($method) ? $method->id : "" %>">
					Hide this tournament from view (Test tournament)
				</td>
				
				<td valign="top" width="10%" align="left">
					<input type="checkbox" name="hidden"  value="1"
					<% ($tourn) ? ($tourn->hidden == 1) ? "checked" : "" : "" %> >
				</td>

			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td  >
					Require adult contact information before registration:
				</td>
				
				<td valign="top" width="10%" align="left">
					<input type="checkbox" name="require_adult_contact"  value="1"
					<% ($method) ? ($method->require_adult_contact == 1) ? "checked" : "" : "" %> >
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
			
				<td valign="top">Log registration changes:</td>
				
				<td valign="top" align="left">
					<input type="checkbox" name="track_reg_changes"  value="1"
					<% ($method) ? ($method->track_reg_changes == 1) ? "checked" : "" : "" %> >
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top">
					<label for="publish_schools">Publish list of registered schools:</label>
				</td>
		
				<td valign="top" align="left">
					<input type="checkbox" id="publish_schools" name="publish_schools"  value="1"
					<% ($method) ? ($method->publish_schools == 1) ? "checked" : "" : "" %> >
				</td>
			</tr>
		
			<tr>
				<td colspan="4">
					<h4>Codes</h4>
				</td>
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top">
					<label for="hide_codes">Hide Codes from Registrants:</label>
				</td>
		
				<td valign="top" align="left">
					<input id="hide_codes" type="checkbox" name="hide_codes"  value="1"
					<% ($method) ? ($method->hide_codes == 1) ? "checked" : "" : "" %> >
				</td>
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top">
					Use incremental school codes:
				</td>
				
				<td valign="top" align="left">
					<input type="checkbox" name="incremental_school_codes"  value="1"
					<% ($method) ? ($method->incremental_school_codes == 1) ? "checked" : "" : "" %> >
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top">
					School codes start with (eg, 1, 100, A, AA):
				</td>
		
				<td valign="top" align="left">
					<input type="text" name="first_school_code" size="5" 
					value="<% ($method) ? $method->first_school_code : "" %>">
				</td>
		
			</tr>
		
			<tr>
				<td colspan="4">
					<h4>Tournaments with Qualifications</h4>
				</td>
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top" >
					Ask for 1 Qualifying Tournament:
				</td>
				
				<td valign="top" align="left">
					<input type="checkbox" name="ask_qualifying_tournament"  value="1"
					<% ($method) ? ($method->ask_qualifying_tournament == 1) ? "checked" : "" : "" %> >
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top" >
					Ask for 2 Qualifying Tournaments:
				</td>
				
				<td valign="top" align="left">
					<input type="checkbox" name="ask_two_quals"  value="1"
					<% ($method) ? ($method->ask_two_quals == 1) ? "checked" : "" : "" %> >
				</td>
		
			</tr>
		
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top" >
					Require dues to be current before registration:
				</td>
			
				<td valign="top" align="left">
					<input type="checkbox" name="must_pay_dues"  value="1"
					<% ($method) ? ($method->must_pay_dues == 1) ? "checked" : "" : "" %> >
				</td>
			
			</tr>
		
			<tr>
				<td colspan="4">
					<h4>Judges</h4>
				</td>
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top" >
					Ask for judge cell numbers:
				</td>
				
				<td valign="top" align="left">
					<input type="checkbox" name="judge_cells"  value="1"
						<% ($method) ? ($method->judge_cells == 1) ? "checked" : "" : "" %> >
				</td>
			
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top" >
					Track first-year judges:
				</td>
				
				<td valign="top" align="left">
					<input type="checkbox" name="track_first_year"  value="1"
					<% ($method) ? ($method->track_first_year == 1) ? "checked" : "" : "" %> >
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top" >
					Publish Judge Paradigms:
				</td>
		
				<td valign="top" align="left">
					<input type="checkbox" name="publish_paradigms"  value="1"
					<% ($method) ? ($method->publish_paradigms == 1) ? "checked" : "" : "" %> >
				</td>
		
			</tr>
		
			<tr <% ($switch++ % 2) ? "class=\"oddrow\"" : "class=\"evenrow\""%> >
		
				<td valign="top" >
					Ask for Judges' Past Tournament Experience:
				</td>
		
				<td valign="top" align="left">
					<input type="checkbox">
				</td>
		
			</tr>

			<tr class="liblrow">
				<td colspan="2" align="right">
					<input type="submit" value=" Save Registration Rules ">
					</form>
				</td>
			</tr>

		</table>

	</div>
		

<%args> 
	$account
	$circuit
	$membership_id
	$certain => undef
</%args> 
<%init>

	my $membership = Tab::Membership->retrieve($membership_id);

	if ($certain eq "I am certain" ) { 

		my $err;
		$err = "News ". $membership->name ." has been deleted ";

		system "/bin/rm -rf $Tab::file_root/files/". $circuit->id ."/articles/". $membership->id;

		$membership->delete;
		$m->redirect("$Tab::url_prefix/circuit/memberships.mhtml?circuit_id=".$circuit->id."&err=$err");

	}

</%init>

<&  "/funclib/warning.mas", account => $account &>
<center>

	<p>You are about to permanently delete the membership class</p>

	<p class="warning"><% $membership->name %></p>


	<p>This cannot be undone.  You can only get it back by re-entering the
	class over again.</p>

	<p>Members currently in the class will have to leave the circuit and rejoin
	in a different class</p>

	<p>Don't say I didn't warn you.</b></p>

% 	if ($certain) {

		<p class="warning">
			You did not type "I am certain", exactly like that.  Try again.
		</p>
% 	}

	<p>To proceed, type "I am certain" in the box below:</p>

	<form action="membership_rm.mhtml" method="post">
	<input type="hidden" value="<% $membership_id %>" name="membership_id">

		<p align="center">
			<input type="text" name="certain" size="20">
		</p>

		<p align="center">
			<input class="blue" type="submit" value="Delete Membership">
			</form>
		</p>

	</center>
